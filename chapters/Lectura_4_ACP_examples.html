
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>PCA: otros ejemplos y algunas funciones útiles. &#8212; Metodos Estadisticos</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'chapters/Lectura_4_ACP_examples';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Análisis de correspondencias simples." href="Lectura_5_AC.html" />
    <link rel="prev" title="Analisis de compomente principales (PCA)." href="Lectura_3_ACP.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="README.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="Metodos Estadisticos - Home"/>
    <img src="../_static/logo.png" class="logo__image only-dark pst-js-only" alt="Metodos Estadisticos - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="README.html">
                    Métodos Estadísticos - Ucentral 2024-II
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="Lectura_1_Intro.html"><em><strong>Introducción al machine learning</strong></em></a></li>
<li class="toctree-l1"><a class="reference internal" href="Lectura_2_Analisis_Descriptivo_Multivariado.html"><em><strong>Analisis descriptivo multivariado.</strong></em></a></li>
<li class="toctree-l1"><a class="reference internal" href="Lectura_3_ACP.html"><em><strong>Analisis de compomente principales (PCA).</strong></em></a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#"><em><strong>PCA: otros ejemplos y algunas funciones útiles.</strong></em></a></li>
<li class="toctree-l1"><a class="reference internal" href="Lectura_5_AC.html"><em><strong>Análisis de correspondencias simples.</strong></em></a></li>
<li class="toctree-l1"><a class="reference internal" href="Lectura_6_ACM.html"><em><strong>Análisis de correspondencias multiples.</strong></em></a></li>
<li class="toctree-l1"><a class="reference internal" href="Lectura_7_Factor_Analysis.html"><em><strong>Análisis Factorial.</strong></em></a></li>

<li class="toctree-l1"><a class="reference internal" href="Lectura_8_Cluster_Jerarquico.html"><em><strong>Clusters jerárquicos.</strong></em></a></li>
<li class="toctree-l1"><a class="reference internal" href="Lectura_9_Kmeans.html"><em><strong>K-means clustering</strong></em></a></li>
<li class="toctree-l1"><a class="reference internal" href="Lectura_10_DBSCAN.html"><em><strong>DBSCAN clustering</strong></em></a></li>
<li class="toctree-l1"><a class="reference internal" href="Lectura_11_Linear_Regression.html"><em><strong>Linear Regression</strong></em></a></li>
<li class="toctree-l1"><a class="reference internal" href="Lectura_12_Logistic_Regression.html"><em><strong>Logistic Regression</strong></em></a></li>


<li class="toctree-l1"><a class="reference internal" href="Lectura_13_Arboles_de_decision.html"><em><strong>Decision Trees</strong></em></a></li>
<li class="toctree-l1"><a class="reference internal" href="Lectura_14_Random_Forrest.html"><em><strong>Random Forrest</strong></em></a></li>
<li class="toctree-l1"><a class="reference internal" href="Lectura_15_Cross_Validation.html"><em><strong>Cross-Validation</strong></em></a></li>
<li class="toctree-l1"><a class="reference internal" href="Lectura_16_Intro_Metodos_de_Boosting.html"><em><strong>Regresion e introduccion método de Boosting</strong></em></a></li>

<li class="toctree-l1"><a class="reference internal" href="Lectura_17_LigthGBM_XgBoost_CatBoost.html"><em><strong>Algunas Implementaciones de Gradient-Boosting.</strong></em></a></li>
<li class="toctree-l1"><a class="reference internal" href="Lectura_18_Intro_to_SVM.html"><em><strong>Intro Support Vector Machines.</strong></em></a></li>
<li class="toctree-l1"><a class="reference internal" href="news_clustering.html"><em><strong>Clustering sobre Noticias de “El Tiempo” (Colombia)</strong></em></a></li>
<li class="toctree-l1"><a class="reference internal" href="model_news_clustering.html"><em><strong>Modelado News-Clustering</strong></em></a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Fchapters/Lectura_4_ACP_examples.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/chapters/Lectura_4_ACP_examples.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>PCA: otros ejemplos y algunas funciones útiles.</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#universidad-central"><em><strong>Universidad Central</strong></em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#maestria-en-analitica-de-datos"><em><strong>Maestría en analítica de datos</strong></em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#metodos-estadisticos-para-analitica-de-datos"><em><strong>Métodos estadísticos para analítica de datos.</strong></em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#docente-luis-andres-campos-maldonado"><em><strong>Docente: Luis Andrés Campos Maldonado.</strong></em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#idea-central"><em><strong>Idea central:</strong></em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#terminos-clave-para-el-analisis-de-componentes-principales"><em><strong>Términos clave para el análisis de componentes principales.</strong></em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#representacion-de-variables-originales-en-un-biplot-de-pca"><em><strong>Representación de Variables Originales en un Biplot de PCA</strong></em></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#matriz-de-datos-originales"><em><strong>Matriz de Datos Originales</strong></em></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#descomposicion-en-componentes-principales"><em><strong>Descomposición en Componentes Principales</strong></em></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#calculo-de-la-matriz-de-covarianza"><em><strong>Cálculo de la Matriz de Covarianza</strong></em></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#eigenvalores-y-eigenvectores"><em><strong>Eigenvalores y Eigenvectores</strong></em></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#proyeccion-de-los-datos"><em><strong>Proyección de los Datos</strong></em></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#representacion-de-las-variables-originales-en-el-biplot"><em><strong>Representación de las Variables Originales en el Biplot</strong></em></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#matriz-de-cargas"><em><strong>Matriz de Cargas</strong></em></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#proyeccion-de-variables-en-el-espacio-de-las-componentes-principales"><em><strong>Proyección de Variables en el Espacio de las Componentes Principales</strong></em></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#visualizacion-en-el-biplot"><em><strong>Visualización en el Biplot</strong></em></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#interpretacion"><em><strong>Interpretación</strong></em></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#resumen"><em><strong>Resumen</strong></em></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#protocolo-de-modulos-pca"><em><strong>Protocolo de módulos PCA.</strong></em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#construccion-de-algunas-funciones-auxiliares"><em><strong>Construcción de algunas funciones auxiliares</strong></em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplo-1"><em><strong>Ejemplo 1</strong></em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ejercicio-en-clase"><em><strong>Ejercicio en clase.</strong></em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#retomando-un-ejemplo-anterior"><em><strong>Retomando un ejemplo anterior.</strong></em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplo-2"><em><strong>Ejemplo 2.</strong></em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplo-3"><em><strong>Ejemplo 3.</strong></em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusiones"><em><strong>Conclusiones.</strong></em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tarea-2"><em><strong>Tarea 2</strong></em></a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="pca-otros-ejemplos-y-algunas-funciones-utiles">
<h1><em><strong>PCA: otros ejemplos y algunas funciones útiles.</strong></em><a class="headerlink" href="#pca-otros-ejemplos-y-algunas-funciones-utiles" title="Link to this heading">#</a></h1>
<section id="universidad-central">
<h2><em><strong>Universidad Central</strong></em><a class="headerlink" href="#universidad-central" title="Link to this heading">#</a></h2>
</section>
<section id="maestria-en-analitica-de-datos">
<h2><em><strong>Maestría en analítica de datos</strong></em><a class="headerlink" href="#maestria-en-analitica-de-datos" title="Link to this heading">#</a></h2>
</section>
<section id="metodos-estadisticos-para-analitica-de-datos">
<h2><em><strong>Métodos estadísticos para analítica de datos.</strong></em><a class="headerlink" href="#metodos-estadisticos-para-analitica-de-datos" title="Link to this heading">#</a></h2>
</section>
<section id="docente-luis-andres-campos-maldonado">
<h2><em><strong>Docente: Luis Andrés Campos Maldonado.</strong></em><a class="headerlink" href="#docente-luis-andres-campos-maldonado" title="Link to this heading">#</a></h2>
</section>
<section id="idea-central">
<h2><em><strong>Idea central:</strong></em><a class="headerlink" href="#idea-central" title="Link to this heading">#</a></h2>
<p>Se tiene un conjunto de <span class="math notranslate nohighlight">\(p\)</span> features cuantitativas y se quieren construir un numero de features <span class="math notranslate nohighlight">\(r\leq p\)</span> con independencia lineal y ortogonales, que contengan la mayor cantidad de variabilidad en el dataset.</p>
</section>
<section id="terminos-clave-para-el-analisis-de-componentes-principales">
<h2><em><strong>Términos clave para el análisis de componentes principales.</strong></em><a class="headerlink" href="#terminos-clave-para-el-analisis-de-componentes-principales" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><strong>Componente principal:</strong> Una combinación lineal de las features originales.</p></li>
<li><p><strong>Loading:</strong> Los pesos que transforman las features originales en las componentes principales.</p></li>
<li><p><strong>Gráfico de sedimentación:</strong> Un plot de las varianzas de las componentes, que muestra la importancia relativa de las componentes, ya sea como varianza explicada o como proporción de la varianza explicada.</p></li>
</ul>
</section>
<section id="representacion-de-variables-originales-en-un-biplot-de-pca">
<h2><em><strong>Representación de Variables Originales en un Biplot de PCA</strong></em><a class="headerlink" href="#representacion-de-variables-originales-en-un-biplot-de-pca" title="Link to this heading">#</a></h2>
<p>El <strong>Análisis de Componentes Principales</strong> (PCA) es una técnica estadística utilizada para reducir la dimensionalidad de un conjunto de datos, conservando la mayor parte de la varianza. Este proceso implica encontrar nuevas variables (componentes principales) que son combinaciones lineales de las variables originales.</p>
<section id="matriz-de-datos-originales">
<h3><em><strong>Matriz de Datos Originales</strong></em><a class="headerlink" href="#matriz-de-datos-originales" title="Link to this heading">#</a></h3>
<p>Supongamos que tenemos un conjunto de datos <span class="math notranslate nohighlight">\(\mathbf{X}\)</span> con <span class="math notranslate nohighlight">\(m\)</span> observaciones y <span class="math notranslate nohighlight">\(n\)</span> variables originales. La matriz <span class="math notranslate nohighlight">\(\mathbf{X}\)</span> tiene la forma:</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\mathbf{X} = \begin{pmatrix}
x_{11} &amp; x_{12} &amp; \dots &amp; x_{1n} \\
x_{21} &amp; x_{22} &amp; \dots &amp; x_{2n} \\
\vdots &amp; \vdots &amp; \ddots &amp; \vdots \\
x_{m1} &amp; x_{m2} &amp; \dots &amp; x_{mn}
\end{pmatrix}
\end{split}\]</div>
<p>Antes de realizar el PCA, centramos los datos restando la media de cada variable:</p>
<div class="math notranslate nohighlight">
\[
\mathbf{X}_c = \mathbf{X} - \mathbf{1}\mu^\top
\]</div>
<p>Aquí, <span class="math notranslate nohighlight">\(\mathbf{X}_c\)</span> es la matriz centrada, <span class="math notranslate nohighlight">\(\mathbf{1}\)</span> es un vector columna de unos (de tamaño <span class="math notranslate nohighlight">\(m\)</span>), y <span class="math notranslate nohighlight">\(\mu\)</span> es el vector de medias de cada variable.</p>
</section>
<section id="descomposicion-en-componentes-principales">
<h3><em><strong>Descomposición en Componentes Principales</strong></em><a class="headerlink" href="#descomposicion-en-componentes-principales" title="Link to this heading">#</a></h3>
<section id="calculo-de-la-matriz-de-covarianza">
<h4><em><strong>Cálculo de la Matriz de Covarianza</strong></em><a class="headerlink" href="#calculo-de-la-matriz-de-covarianza" title="Link to this heading">#</a></h4>
<p>Se calcula la matriz de covarianza <span class="math notranslate nohighlight">\(\mathbf{C}\)</span> de <span class="math notranslate nohighlight">\(\mathbf{X}_c\)</span>:</p>
<div class="math notranslate nohighlight">
\[
\mathbf{C} = \frac{1}{m-1} \mathbf{X}_c^\top \mathbf{X}_c
\]</div>
</section>
<section id="eigenvalores-y-eigenvectores">
<h4><em><strong>Eigenvalores y Eigenvectores</strong></em><a class="headerlink" href="#eigenvalores-y-eigenvectores" title="Link to this heading">#</a></h4>
<p>Realizamos la descomposición en valores propios de <span class="math notranslate nohighlight">\(\mathbf{C}\)</span>:</p>
<div class="math notranslate nohighlight">
\[
\mathbf{C} \mathbf{v}_i = \lambda_i \mathbf{v}_i
\]</div>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(\lambda_i\)</span> son los eigenvalores, que indican la varianza explicada por cada componente principal.</p></li>
<li><p><span class="math notranslate nohighlight">\(\mathbf{v}_i\)</span> son los eigenvectores, que representan las direcciones principales en el espacio original de las <span class="math notranslate nohighlight">\(n\)</span> variables.</p></li>
</ul>
</section>
<section id="proyeccion-de-los-datos">
<h4><em><strong>Proyección de los Datos</strong></em><a class="headerlink" href="#proyeccion-de-los-datos" title="Link to this heading">#</a></h4>
<p>Las nuevas coordenadas de las observaciones en el espacio de las componentes principales se obtienen proyectando los datos centrados sobre los eigenvectores:</p>
<div class="math notranslate nohighlight">
\[
\mathbf{Z} = \mathbf{X}_c \mathbf{V}_k
\]</div>
<p>Aquí, <span class="math notranslate nohighlight">\(\mathbf{Z}\)</span> es la matriz de componentes principales, y <span class="math notranslate nohighlight">\(\mathbf{V}_k\)</span> es la matriz de eigenvectores correspondientes a las <span class="math notranslate nohighlight">\(k\)</span> primeras componentes principales.</p>
</section>
</section>
<section id="representacion-de-las-variables-originales-en-el-biplot">
<h3><em><strong>Representación de las Variables Originales en el Biplot</strong></em><a class="headerlink" href="#representacion-de-las-variables-originales-en-el-biplot" title="Link to this heading">#</a></h3>
<section id="matriz-de-cargas">
<h4><em><strong>Matriz de Cargas</strong></em><a class="headerlink" href="#matriz-de-cargas" title="Link to this heading">#</a></h4>
<p>La matriz <span class="math notranslate nohighlight">\(\mathbf{V}_k\)</span> se conoce como la <strong>matriz de cargas</strong>. Sus elementos <span class="math notranslate nohighlight">\(v_{ij}\)</span> indican cómo las variables originales contribuyen a las componentes principales:</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\mathbf{V}_k = \begin{pmatrix}
v_{11} &amp; v_{12} &amp; \dots &amp; v_{1k} \\
v_{21} &amp; v_{22} &amp; \dots &amp; v_{2k} \\
\vdots &amp; \vdots &amp; \ddots &amp; \vdots \\
v_{n1} &amp; v_{n2} &amp; \dots &amp; v_{nk}
\end{pmatrix}
\end{split}\]</div>
<p>Cada fila <span class="math notranslate nohighlight">\(\mathbf{v}_j\)</span> representa las cargas de la <span class="math notranslate nohighlight">\(j\)</span>-ésima variable original en las <span class="math notranslate nohighlight">\(k\)</span> componentes principales seleccionadas.</p>
</section>
<section id="proyeccion-de-variables-en-el-espacio-de-las-componentes-principales">
<h4><em><strong>Proyección de Variables en el Espacio de las Componentes Principales</strong></em><a class="headerlink" href="#proyeccion-de-variables-en-el-espacio-de-las-componentes-principales" title="Link to this heading">#</a></h4>
<p>Para representar las variables originales en un biplot (cuando <span class="math notranslate nohighlight">\(k = 2\)</span>):</p>
<ol class="arabic simple">
<li><p>Selecciona las columnas de <span class="math notranslate nohighlight">\(\mathbf{V}_k\)</span> correspondientes a las dos primeras componentes principales, <span class="math notranslate nohighlight">\(\mathbf{v}_1\)</span> y <span class="math notranslate nohighlight">\(\mathbf{v}_2\)</span>.</p></li>
<li><p>La proyección de la <span class="math notranslate nohighlight">\(j\)</span>-ésima variable original en el biplot se representa por el punto <span class="math notranslate nohighlight">\((v_{j1}, v_{j2})\)</span>, donde:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(v_{j1}\)</span> es la carga de la <span class="math notranslate nohighlight">\(j\)</span>-ésima variable en la primera componente principal.</p></li>
<li><p><span class="math notranslate nohighlight">\(v_{j2}\)</span> es la carga de la <span class="math notranslate nohighlight">\(j\)</span>-ésima variable en la segunda componente principal.</p></li>
</ul>
</li>
</ol>
</section>
<section id="visualizacion-en-el-biplot">
<h4><em><strong>Visualización en el Biplot</strong></em><a class="headerlink" href="#visualizacion-en-el-biplot" title="Link to this heading">#</a></h4>
<p>Para cada variable <span class="math notranslate nohighlight">\(j\)</span>, se dibuja un vector desde el origen hasta el punto <span class="math notranslate nohighlight">\((v_{j1}, v_{j2})\)</span>. Estos vectores en el biplot indican:</p>
<ul class="simple">
<li><p><strong>Dirección:</strong> Hacia dónde “apunta” la variable en relación con las componentes principales.</p></li>
<li><p><strong>Longitud:</strong> Cuánta varianza de la variable original es capturada por las dos primeras componentes principales.</p></li>
</ul>
</section>
<section id="interpretacion">
<h4><em><strong>Interpretación</strong></em><a class="headerlink" href="#interpretacion" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p><strong>Ángulo entre vectores:</strong> Indica la correlación entre las variables originales.</p></li>
<li><p><strong>Longitud del vector:</strong> Indica la contribución de la variable a las componentes principales seleccionadas.</p></li>
<li><p><strong>Dirección:</strong> Muestra cómo se relaciona cada variable con las nuevas dimensiones definidas por las componentes principales.</p></li>
</ul>
</section>
</section>
<section id="resumen">
<h3><em><strong>Resumen</strong></em><a class="headerlink" href="#resumen" title="Link to this heading">#</a></h3>
<p>En un biplot, los vectores que representan las variables originales son el resultado de proyectar estas variables en el espacio definido por las componentes principales seleccionadas. Esta proyección se realiza utilizando la matriz de cargas, y los vectores resultantes permiten visualizar e interpretar cómo las variables originales contribuyen a la estructura de varianza capturada en el espacio de las componentes principales.</p>
</section>
</section>
<section id="protocolo-de-modulos-pca">
<h2><em><strong>Protocolo de módulos PCA.</strong></em><a class="headerlink" href="#protocolo-de-modulos-pca" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>
<span class="kn">import</span> <span class="nn">plotly.graph_objects</span> <span class="k">as</span> <span class="nn">go</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="c1">##</span>
<span class="kn">from</span> <span class="nn">sklearn.decomposition</span> <span class="kn">import</span> <span class="n">PCA</span>            <span class="c1">## Principal component analysis.</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">StandardScaler</span> <span class="c1">## Escalar datos.</span>
<span class="kn">from</span> <span class="nn">utils.plots_pca</span> <span class="kn">import</span> <span class="o">*</span>
<span class="c1">##</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;figure.figsize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;ggplot&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="construccion-de-algunas-funciones-auxiliares">
<h2><em><strong>Construcción de algunas funciones auxiliares</strong></em><a class="headerlink" href="#construccion-de-algunas-funciones-auxiliares" title="Link to this heading">#</a></h2>
<p>En los siguientes bloques de código se muestran algunas funciones que pueden de ser de ayuda para el ánalisis de PCA en <code class="docutils literal notranslate"><span class="pre">Python</span></code>.</p>
<p>Todas fueron construidas por el autor de este cuaderno, con apoyo del material de la página oficial de <a class="reference external" href="https://plotly.com/python/pca-visualization/"><code class="docutils literal notranslate"><span class="pre">plotly,</span></code></a> tenga la libertad de entenderla, mejorarla y por supuesto compartir dicha mejoras.</p>
<ul class="simple">
<li><p><strong><a class="reference external" href="https://wiki.q-researchsoftware.com/wiki/Principal_Components_Analysis_Biplot"><code class="docutils literal notranslate"><span class="pre">biplot</span></code></a></strong> Esta función genera un biplot donde se muestran los espacios de individuos y las variables en un solo plot.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">biplot1</span></code>: Esta función genera solo el primer plano factorial donde se aprecia la influencia de la features originales en dicho plano,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">view_index</span></code>: Permite seleccionar algunos registros del dataframe en pro de un mejor entendimiento de los plots anteriores.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sedimentacion</span></code>: Genera el gráfico de sedimentación para buscar un posible método para la selección de la cantidad de componenetes principales.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">plot_loadings_heatmap()</span></code>: Genera un barplot de las cargas en cada una de las componentes principales.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">plot_loadings_bar()</span></code>: Esta función genera un heatmap de los loadings de las componentes pricipales.</p></li>
</ul>
</section>
<section id="ejemplo-1">
<h2><em><strong>Ejemplo 1</strong></em><a class="headerlink" href="#ejemplo-1" title="Link to this heading">#</a></h2>
<p>El dataset <code class="docutils literal notranslate"><span class="pre">birds.txt</span></code> contiene medidas corporales de aves, se desea buscar realizar un análisis de la selección natural.</p>
<p>Se tiene una información adicional sobre el índice de los registros, <strong>de la ave 1 a la 21 sobrevivieron.</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">url_base</span> <span class="o">=</span> <span class="s2">&quot;https://raw.githubusercontent.com/lacamposm/Metodos_Estadisticos/main/data/&quot;</span>
<span class="n">df_name1</span> <span class="o">=</span> <span class="s2">&quot;birds.txt&quot;</span>
<span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url_base</span> <span class="o">+</span> <span class="n">df_name1</span><span class="p">,</span> <span class="n">sep</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="n">index_col</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,)</span>
<span class="n">df1</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>longitud_total</th>
      <th>extension_alas</th>
      <th>longitud_pico_y_cabeza</th>
      <th>longitud_humero</th>
      <th>longitud_quilla</th>
    </tr>
    <tr>
      <th>pajaro</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>156</td>
      <td>245</td>
      <td>31.6</td>
      <td>18.5</td>
      <td>20.5</td>
    </tr>
    <tr>
      <th>2</th>
      <td>154</td>
      <td>240</td>
      <td>30.4</td>
      <td>17.9</td>
      <td>19.6</td>
    </tr>
    <tr>
      <th>3</th>
      <td>153</td>
      <td>240</td>
      <td>31.0</td>
      <td>18.4</td>
      <td>20.6</td>
    </tr>
    <tr>
      <th>4</th>
      <td>153</td>
      <td>236</td>
      <td>30.9</td>
      <td>17.7</td>
      <td>20.2</td>
    </tr>
    <tr>
      <th>5</th>
      <td>155</td>
      <td>243</td>
      <td>31.5</td>
      <td>18.6</td>
      <td>20.3</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">df1</span><span class="o">.</span><span class="n">corr</span><span class="p">(),</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;PuBu&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/fd6a184bf0d8eafc361f5442449f07e5728a16c54f116e9adaa9be22e97964a7.png" src="../_images/fd6a184bf0d8eafc361f5442449f07e5728a16c54f116e9adaa9be22e97964a7.png" />
</div>
</div>
<p>Podemos observar una alta correlación lineal entre las variables, podemos pensar que un <code class="docutils literal notranslate"><span class="pre">PCA</span></code> podría estar bastaste bien en este caso.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Rutina habitual.</span>
<span class="n">scaler1</span> <span class="o">=</span> <span class="n">StandardScaler</span><span class="p">()</span>
<span class="n">scaler1</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df1</span><span class="p">)</span>
<span class="n">X_scaled1</span> <span class="o">=</span> <span class="n">scaler1</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">df1</span><span class="p">)</span>

<span class="n">display</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">X_scaled1</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">df1</span><span class="o">.</span><span class="n">columns</span><span class="p">))</span>

<span class="n">pca1</span> <span class="o">=</span> <span class="n">PCA</span><span class="p">()</span>
<span class="n">pca1</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_scaled1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>longitud_total</th>
      <th>extension_alas</th>
      <th>longitud_pico_y_cabeza</th>
      <th>longitud_humero</th>
      <th>longitud_quilla</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-0.547333</td>
      <td>0.732373</td>
      <td>0.179019</td>
      <td>0.054812</td>
      <td>-0.332785</td>
    </tr>
    <tr>
      <th>1</th>
      <td>-1.100309</td>
      <td>-0.264468</td>
      <td>-1.346531</td>
      <td>-1.019498</td>
      <td>-1.250023</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-1.376796</td>
      <td>-0.264468</td>
      <td>-0.583756</td>
      <td>-0.124240</td>
      <td>-0.230870</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-1.376796</td>
      <td>-1.061941</td>
      <td>-0.710885</td>
      <td>-1.377602</td>
      <td>-0.638531</td>
    </tr>
    <tr>
      <th>4</th>
      <td>-0.823821</td>
      <td>0.333637</td>
      <td>0.051889</td>
      <td>0.233863</td>
      <td>-0.536616</td>
    </tr>
    <tr>
      <th>5</th>
      <td>1.388081</td>
      <td>1.131110</td>
      <td>0.687535</td>
      <td>0.950070</td>
      <td>0.074877</td>
    </tr>
    <tr>
      <th>6</th>
      <td>-0.270845</td>
      <td>-0.663205</td>
      <td>-0.710885</td>
      <td>-0.124240</td>
      <td>-0.638531</td>
    </tr>
    <tr>
      <th>7</th>
      <td>-0.823821</td>
      <td>-0.463836</td>
      <td>1.704568</td>
      <td>0.233863</td>
      <td>0.380623</td>
    </tr>
    <tr>
      <th>8</th>
      <td>1.664569</td>
      <td>1.330478</td>
      <td>1.577439</td>
      <td>1.129122</td>
      <td>0.278707</td>
    </tr>
    <tr>
      <th>9</th>
      <td>0.005643</td>
      <td>-0.663205</td>
      <td>-0.583756</td>
      <td>0.591967</td>
      <td>1.195946</td>
    </tr>
    <tr>
      <th>10</th>
      <td>0.005643</td>
      <td>-0.264468</td>
      <td>-0.202369</td>
      <td>0.233863</td>
      <td>1.195946</td>
    </tr>
    <tr>
      <th>11</th>
      <td>0.558618</td>
      <td>0.533005</td>
      <td>-0.456627</td>
      <td>0.233863</td>
      <td>-0.332785</td>
    </tr>
    <tr>
      <th>12</th>
      <td>0.835106</td>
      <td>0.931742</td>
      <td>1.068923</td>
      <td>1.487225</td>
      <td>0.992115</td>
    </tr>
    <tr>
      <th>13</th>
      <td>-0.270845</td>
      <td>0.732373</td>
      <td>0.687535</td>
      <td>1.129122</td>
      <td>-0.842362</td>
    </tr>
    <tr>
      <th>14</th>
      <td>-0.270845</td>
      <td>-1.261309</td>
      <td>0.051889</td>
      <td>-0.661395</td>
      <td>-1.046193</td>
    </tr>
    <tr>
      <th>15</th>
      <td>-0.547333</td>
      <td>-0.862573</td>
      <td>-0.710885</td>
      <td>-0.840447</td>
      <td>-0.536616</td>
    </tr>
    <tr>
      <th>16</th>
      <td>0.005643</td>
      <td>0.533005</td>
      <td>-0.075240</td>
      <td>0.054812</td>
      <td>0.788284</td>
    </tr>
    <tr>
      <th>17</th>
      <td>-1.376796</td>
      <td>-0.663205</td>
      <td>-1.219402</td>
      <td>-0.482343</td>
      <td>0.074877</td>
    </tr>
    <tr>
      <th>18</th>
      <td>-0.823821</td>
      <td>-1.061941</td>
      <td>-1.473660</td>
      <td>0.054812</td>
      <td>-0.740446</td>
    </tr>
    <tr>
      <th>19</th>
      <td>1.388081</td>
      <td>0.931742</td>
      <td>1.323181</td>
      <td>0.233863</td>
      <td>1.094030</td>
    </tr>
    <tr>
      <th>20</th>
      <td>0.282130</td>
      <td>-1.061941</td>
      <td>0.051889</td>
      <td>-0.840447</td>
      <td>0.686369</td>
    </tr>
    <tr>
      <th>21</th>
      <td>-0.823821</td>
      <td>-0.264468</td>
      <td>-0.075240</td>
      <td>-0.840447</td>
      <td>-0.128954</td>
    </tr>
    <tr>
      <th>22</th>
      <td>-0.547333</td>
      <td>-0.264468</td>
      <td>0.051889</td>
      <td>-0.482343</td>
      <td>-0.230870</td>
    </tr>
    <tr>
      <th>23</th>
      <td>0.558618</td>
      <td>0.134268</td>
      <td>1.450310</td>
      <td>0.591967</td>
      <td>0.890200</td>
    </tr>
    <tr>
      <th>24</th>
      <td>-1.653284</td>
      <td>-1.859414</td>
      <td>-1.473660</td>
      <td>-2.272860</td>
      <td>-1.046193</td>
    </tr>
    <tr>
      <th>25</th>
      <td>0.558618</td>
      <td>1.729215</td>
      <td>0.306148</td>
      <td>0.591967</td>
      <td>1.705523</td>
    </tr>
    <tr>
      <th>26</th>
      <td>-0.823821</td>
      <td>-0.862573</td>
      <td>-0.583756</td>
      <td>0.054812</td>
      <td>-0.842362</td>
    </tr>
    <tr>
      <th>27</th>
      <td>-0.270845</td>
      <td>0.732373</td>
      <td>0.941793</td>
      <td>1.845328</td>
      <td>0.584454</td>
    </tr>
    <tr>
      <th>28</th>
      <td>1.941057</td>
      <td>0.732373</td>
      <td>2.085956</td>
      <td>2.382483</td>
      <td>1.909353</td>
    </tr>
    <tr>
      <th>29</th>
      <td>-1.376796</td>
      <td>-2.058783</td>
      <td>-1.727919</td>
      <td>-2.093808</td>
      <td>-1.046193</td>
    </tr>
    <tr>
      <th>30</th>
      <td>1.111594</td>
      <td>-0.463836</td>
      <td>-1.473660</td>
      <td>-0.840447</td>
      <td>2.317015</td>
    </tr>
    <tr>
      <th>31</th>
      <td>1.111594</td>
      <td>0.333637</td>
      <td>0.179019</td>
      <td>0.591967</td>
      <td>0.482538</td>
    </tr>
    <tr>
      <th>32</th>
      <td>0.282130</td>
      <td>0.732373</td>
      <td>0.433277</td>
      <td>0.054812</td>
      <td>0.890200</td>
    </tr>
    <tr>
      <th>33</th>
      <td>0.282130</td>
      <td>1.131110</td>
      <td>-0.710885</td>
      <td>-0.661395</td>
      <td>-1.861516</td>
    </tr>
    <tr>
      <th>34</th>
      <td>-0.823821</td>
      <td>0.333637</td>
      <td>-0.710885</td>
      <td>0.054812</td>
      <td>0.482538</td>
    </tr>
    <tr>
      <th>35</th>
      <td>1.111594</td>
      <td>2.127951</td>
      <td>0.560406</td>
      <td>1.129122</td>
      <td>1.399777</td>
    </tr>
    <tr>
      <th>36</th>
      <td>-1.653284</td>
      <td>-2.258151</td>
      <td>-1.346531</td>
      <td>-2.093808</td>
      <td>-2.269177</td>
    </tr>
    <tr>
      <th>37</th>
      <td>0.282130</td>
      <td>0.134268</td>
      <td>-0.838015</td>
      <td>-0.482343</td>
      <td>-0.332785</td>
    </tr>
    <tr>
      <th>38</th>
      <td>-0.823821</td>
      <td>-0.663205</td>
      <td>-0.329498</td>
      <td>-1.019498</td>
      <td>-1.555770</td>
    </tr>
    <tr>
      <th>39</th>
      <td>1.388081</td>
      <td>1.529846</td>
      <td>2.467343</td>
      <td>1.845328</td>
      <td>2.011269</td>
    </tr>
    <tr>
      <th>40</th>
      <td>1.388081</td>
      <td>0.134268</td>
      <td>-0.583756</td>
      <td>-0.661395</td>
      <td>-0.128954</td>
    </tr>
    <tr>
      <th>41</th>
      <td>-0.547333</td>
      <td>-0.862573</td>
      <td>0.306148</td>
      <td>-0.482343</td>
      <td>-0.536616</td>
    </tr>
    <tr>
      <th>42</th>
      <td>0.282130</td>
      <td>-0.663205</td>
      <td>0.051889</td>
      <td>-0.124240</td>
      <td>-0.536616</td>
    </tr>
    <tr>
      <th>43</th>
      <td>0.835106</td>
      <td>0.732373</td>
      <td>0.814664</td>
      <td>1.129122</td>
      <td>-0.027039</td>
    </tr>
    <tr>
      <th>44</th>
      <td>-0.823821</td>
      <td>-1.261309</td>
      <td>-0.965144</td>
      <td>-1.377602</td>
      <td>-1.250023</td>
    </tr>
    <tr>
      <th>45</th>
      <td>1.111594</td>
      <td>1.131110</td>
      <td>0.560406</td>
      <td>1.129122</td>
      <td>-0.434700</td>
    </tr>
    <tr>
      <th>46</th>
      <td>-1.376796</td>
      <td>-0.862573</td>
      <td>-1.092273</td>
      <td>0.233863</td>
      <td>-0.434700</td>
    </tr>
    <tr>
      <th>47</th>
      <td>1.111594</td>
      <td>0.732373</td>
      <td>1.323181</td>
      <td>0.054812</td>
      <td>0.278707</td>
    </tr>
    <tr>
      <th>48</th>
      <td>1.664569</td>
      <td>1.330478</td>
      <td>1.068923</td>
      <td>0.591967</td>
      <td>0.074877</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output text_html"><style>#sk-container-id-1 {
  /* Definition of color scheme common for light and dark mode */
  --sklearn-color-text: black;
  --sklearn-color-line: gray;
  /* Definition of color scheme for unfitted estimators */
  --sklearn-color-unfitted-level-0: #fff5e6;
  --sklearn-color-unfitted-level-1: #f6e4d2;
  --sklearn-color-unfitted-level-2: #ffe0b3;
  --sklearn-color-unfitted-level-3: chocolate;
  /* Definition of color scheme for fitted estimators */
  --sklearn-color-fitted-level-0: #f0f8ff;
  --sklearn-color-fitted-level-1: #d4ebff;
  --sklearn-color-fitted-level-2: #b3dbfd;
  --sklearn-color-fitted-level-3: cornflowerblue;

  /* Specific color for light theme */
  --sklearn-color-text-on-default-background: var(--sg-text-color, var(--theme-code-foreground, var(--jp-content-font-color1, black)));
  --sklearn-color-background: var(--sg-background-color, var(--theme-background, var(--jp-layout-color0, white)));
  --sklearn-color-border-box: var(--sg-text-color, var(--theme-code-foreground, var(--jp-content-font-color1, black)));
  --sklearn-color-icon: #696969;

  @media (prefers-color-scheme: dark) {
    /* Redefinition of color scheme for dark theme */
    --sklearn-color-text-on-default-background: var(--sg-text-color, var(--theme-code-foreground, var(--jp-content-font-color1, white)));
    --sklearn-color-background: var(--sg-background-color, var(--theme-background, var(--jp-layout-color0, #111)));
    --sklearn-color-border-box: var(--sg-text-color, var(--theme-code-foreground, var(--jp-content-font-color1, white)));
    --sklearn-color-icon: #878787;
  }
}

#sk-container-id-1 {
  color: var(--sklearn-color-text);
}

#sk-container-id-1 pre {
  padding: 0;
}

#sk-container-id-1 input.sk-hidden--visually {
  border: 0;
  clip: rect(1px 1px 1px 1px);
  clip: rect(1px, 1px, 1px, 1px);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;
}

#sk-container-id-1 div.sk-dashed-wrapped {
  border: 1px dashed var(--sklearn-color-line);
  margin: 0 0.4em 0.5em 0.4em;
  box-sizing: border-box;
  padding-bottom: 0.4em;
  background-color: var(--sklearn-color-background);
}

#sk-container-id-1 div.sk-container {
  /* jupyter's `normalize.less` sets `[hidden] { display: none; }`
     but bootstrap.min.css set `[hidden] { display: none !important; }`
     so we also need the `!important` here to be able to override the
     default hidden behavior on the sphinx rendered scikit-learn.org.
     See: https://github.com/scikit-learn/scikit-learn/issues/21755 */
  display: inline-block !important;
  position: relative;
}

#sk-container-id-1 div.sk-text-repr-fallback {
  display: none;
}

div.sk-parallel-item,
div.sk-serial,
div.sk-item {
  /* draw centered vertical line to link estimators */
  background-image: linear-gradient(var(--sklearn-color-text-on-default-background), var(--sklearn-color-text-on-default-background));
  background-size: 2px 100%;
  background-repeat: no-repeat;
  background-position: center center;
}

/* Parallel-specific style estimator block */

#sk-container-id-1 div.sk-parallel-item::after {
  content: "";
  width: 100%;
  border-bottom: 2px solid var(--sklearn-color-text-on-default-background);
  flex-grow: 1;
}

#sk-container-id-1 div.sk-parallel {
  display: flex;
  align-items: stretch;
  justify-content: center;
  background-color: var(--sklearn-color-background);
  position: relative;
}

#sk-container-id-1 div.sk-parallel-item {
  display: flex;
  flex-direction: column;
}

#sk-container-id-1 div.sk-parallel-item:first-child::after {
  align-self: flex-end;
  width: 50%;
}

#sk-container-id-1 div.sk-parallel-item:last-child::after {
  align-self: flex-start;
  width: 50%;
}

#sk-container-id-1 div.sk-parallel-item:only-child::after {
  width: 0;
}

/* Serial-specific style estimator block */

#sk-container-id-1 div.sk-serial {
  display: flex;
  flex-direction: column;
  align-items: center;
  background-color: var(--sklearn-color-background);
  padding-right: 1em;
  padding-left: 1em;
}


/* Toggleable style: style used for estimator/Pipeline/ColumnTransformer box that is
clickable and can be expanded/collapsed.
- Pipeline and ColumnTransformer use this feature and define the default style
- Estimators will overwrite some part of the style using the `sk-estimator` class
*/

/* Pipeline and ColumnTransformer style (default) */

#sk-container-id-1 div.sk-toggleable {
  /* Default theme specific background. It is overwritten whether we have a
  specific estimator or a Pipeline/ColumnTransformer */
  background-color: var(--sklearn-color-background);
}

/* Toggleable label */
#sk-container-id-1 label.sk-toggleable__label {
  cursor: pointer;
  display: block;
  width: 100%;
  margin-bottom: 0;
  padding: 0.5em;
  box-sizing: border-box;
  text-align: center;
}

#sk-container-id-1 label.sk-toggleable__label-arrow:before {
  /* Arrow on the left of the label */
  content: "▸";
  float: left;
  margin-right: 0.25em;
  color: var(--sklearn-color-icon);
}

#sk-container-id-1 label.sk-toggleable__label-arrow:hover:before {
  color: var(--sklearn-color-text);
}

/* Toggleable content - dropdown */

#sk-container-id-1 div.sk-toggleable__content {
  max-height: 0;
  max-width: 0;
  overflow: hidden;
  text-align: left;
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-0);
}

#sk-container-id-1 div.sk-toggleable__content.fitted {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-0);
}

#sk-container-id-1 div.sk-toggleable__content pre {
  margin: 0.2em;
  border-radius: 0.25em;
  color: var(--sklearn-color-text);
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-0);
}

#sk-container-id-1 div.sk-toggleable__content.fitted pre {
  /* unfitted */
  background-color: var(--sklearn-color-fitted-level-0);
}

#sk-container-id-1 input.sk-toggleable__control:checked~div.sk-toggleable__content {
  /* Expand drop-down */
  max-height: 200px;
  max-width: 100%;
  overflow: auto;
}

#sk-container-id-1 input.sk-toggleable__control:checked~label.sk-toggleable__label-arrow:before {
  content: "▾";
}

/* Pipeline/ColumnTransformer-specific style */

#sk-container-id-1 div.sk-label input.sk-toggleable__control:checked~label.sk-toggleable__label {
  color: var(--sklearn-color-text);
  background-color: var(--sklearn-color-unfitted-level-2);
}

#sk-container-id-1 div.sk-label.fitted input.sk-toggleable__control:checked~label.sk-toggleable__label {
  background-color: var(--sklearn-color-fitted-level-2);
}

/* Estimator-specific style */

/* Colorize estimator box */
#sk-container-id-1 div.sk-estimator input.sk-toggleable__control:checked~label.sk-toggleable__label {
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-2);
}

#sk-container-id-1 div.sk-estimator.fitted input.sk-toggleable__control:checked~label.sk-toggleable__label {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-2);
}

#sk-container-id-1 div.sk-label label.sk-toggleable__label,
#sk-container-id-1 div.sk-label label {
  /* The background is the default theme color */
  color: var(--sklearn-color-text-on-default-background);
}

/* On hover, darken the color of the background */
#sk-container-id-1 div.sk-label:hover label.sk-toggleable__label {
  color: var(--sklearn-color-text);
  background-color: var(--sklearn-color-unfitted-level-2);
}

/* Label box, darken color on hover, fitted */
#sk-container-id-1 div.sk-label.fitted:hover label.sk-toggleable__label.fitted {
  color: var(--sklearn-color-text);
  background-color: var(--sklearn-color-fitted-level-2);
}

/* Estimator label */

#sk-container-id-1 div.sk-label label {
  font-family: monospace;
  font-weight: bold;
  display: inline-block;
  line-height: 1.2em;
}

#sk-container-id-1 div.sk-label-container {
  text-align: center;
}

/* Estimator-specific */
#sk-container-id-1 div.sk-estimator {
  font-family: monospace;
  border: 1px dotted var(--sklearn-color-border-box);
  border-radius: 0.25em;
  box-sizing: border-box;
  margin-bottom: 0.5em;
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-0);
}

#sk-container-id-1 div.sk-estimator.fitted {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-0);
}

/* on hover */
#sk-container-id-1 div.sk-estimator:hover {
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-2);
}

#sk-container-id-1 div.sk-estimator.fitted:hover {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-2);
}

/* Specification for estimator info (e.g. "i" and "?") */

/* Common style for "i" and "?" */

.sk-estimator-doc-link,
a:link.sk-estimator-doc-link,
a:visited.sk-estimator-doc-link {
  float: right;
  font-size: smaller;
  line-height: 1em;
  font-family: monospace;
  background-color: var(--sklearn-color-background);
  border-radius: 1em;
  height: 1em;
  width: 1em;
  text-decoration: none !important;
  margin-left: 1ex;
  /* unfitted */
  border: var(--sklearn-color-unfitted-level-1) 1pt solid;
  color: var(--sklearn-color-unfitted-level-1);
}

.sk-estimator-doc-link.fitted,
a:link.sk-estimator-doc-link.fitted,
a:visited.sk-estimator-doc-link.fitted {
  /* fitted */
  border: var(--sklearn-color-fitted-level-1) 1pt solid;
  color: var(--sklearn-color-fitted-level-1);
}

/* On hover */
div.sk-estimator:hover .sk-estimator-doc-link:hover,
.sk-estimator-doc-link:hover,
div.sk-label-container:hover .sk-estimator-doc-link:hover,
.sk-estimator-doc-link:hover {
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-3);
  color: var(--sklearn-color-background);
  text-decoration: none;
}

div.sk-estimator.fitted:hover .sk-estimator-doc-link.fitted:hover,
.sk-estimator-doc-link.fitted:hover,
div.sk-label-container:hover .sk-estimator-doc-link.fitted:hover,
.sk-estimator-doc-link.fitted:hover {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-3);
  color: var(--sklearn-color-background);
  text-decoration: none;
}

/* Span, style for the box shown on hovering the info icon */
.sk-estimator-doc-link span {
  display: none;
  z-index: 9999;
  position: relative;
  font-weight: normal;
  right: .2ex;
  padding: .5ex;
  margin: .5ex;
  width: min-content;
  min-width: 20ex;
  max-width: 50ex;
  color: var(--sklearn-color-text);
  box-shadow: 2pt 2pt 4pt #999;
  /* unfitted */
  background: var(--sklearn-color-unfitted-level-0);
  border: .5pt solid var(--sklearn-color-unfitted-level-3);
}

.sk-estimator-doc-link.fitted span {
  /* fitted */
  background: var(--sklearn-color-fitted-level-0);
  border: var(--sklearn-color-fitted-level-3);
}

.sk-estimator-doc-link:hover span {
  display: block;
}

/* "?"-specific style due to the `<a>` HTML tag */

#sk-container-id-1 a.estimator_doc_link {
  float: right;
  font-size: 1rem;
  line-height: 1em;
  font-family: monospace;
  background-color: var(--sklearn-color-background);
  border-radius: 1rem;
  height: 1rem;
  width: 1rem;
  text-decoration: none;
  /* unfitted */
  color: var(--sklearn-color-unfitted-level-1);
  border: var(--sklearn-color-unfitted-level-1) 1pt solid;
}

#sk-container-id-1 a.estimator_doc_link.fitted {
  /* fitted */
  border: var(--sklearn-color-fitted-level-1) 1pt solid;
  color: var(--sklearn-color-fitted-level-1);
}

/* On hover */
#sk-container-id-1 a.estimator_doc_link:hover {
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-3);
  color: var(--sklearn-color-background);
  text-decoration: none;
}

#sk-container-id-1 a.estimator_doc_link.fitted:hover {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-3);
}
</style><div id="sk-container-id-1" class="sk-top-container"><div class="sk-text-repr-fallback"><pre>PCA()</pre><b>In a Jupyter environment, please rerun this cell to show the HTML representation or trust the notebook. <br />On GitHub, the HTML representation is unable to render, please try loading this page with nbviewer.org.</b></div><div class="sk-container" hidden><div class="sk-item"><div class="sk-estimator fitted sk-toggleable"><input class="sk-toggleable__control sk-hidden--visually" id="sk-estimator-id-1" type="checkbox" checked><label for="sk-estimator-id-1" class="sk-toggleable__label fitted sk-toggleable__label-arrow fitted">&nbsp;&nbsp;PCA<a class="sk-estimator-doc-link fitted" rel="noreferrer" target="_blank" href="https://scikit-learn.org/1.5/modules/generated/sklearn.decomposition.PCA.html">?<span>Documentation for PCA</span></a><span class="sk-estimator-doc-link fitted">i<span>Fitted</span></span></label><div class="sk-toggleable__content fitted"><pre>PCA()</pre></div> </div></div></div></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot de sediementación</span>
<span class="n">sedimentacion</span><span class="p">(</span><span class="n">pca1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<p>Notemos la forma de codo que se presenta en la gráfica, dado que no hay un método puntual para la selección de las componentes principal, podemos optar por incluir cierta cantidad de varibilidad (un valor determinado) o determinar el número de componentes principales observando si hasta determinado punto la inclusión de una variable adicional tiene un peso significativo, recuerde que a más variables la interpretabilidad se vuelve bastante complicada.</p>
<p>Basados en lo anterior vamos a considerar vamos a conciderar <strong>solo 2 componentes principales.</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">pca1</span><span class="o">.</span><span class="n">explained_variance_</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pca1</span><span class="o">.</span><span class="n">explained_variance_ratio_</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">pca1</span><span class="o">.</span><span class="n">explained_variance_ratio_</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[3.69131123 0.54257708 0.39447506 0.30784813 0.16795517]
[0.72319567 0.10630082 0.07728491 0.0603131  0.0329055 ]
[0.72319567 0.82949648 0.90678139 0.9670945  1.        ]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n_components</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">pca1</span> <span class="o">=</span> <span class="n">PCA</span><span class="p">(</span><span class="n">n_components</span><span class="o">=</span><span class="n">n_components</span><span class="p">)</span>
<span class="n">pca1</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_scaled1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style>#sk-container-id-2 {
  /* Definition of color scheme common for light and dark mode */
  --sklearn-color-text: black;
  --sklearn-color-line: gray;
  /* Definition of color scheme for unfitted estimators */
  --sklearn-color-unfitted-level-0: #fff5e6;
  --sklearn-color-unfitted-level-1: #f6e4d2;
  --sklearn-color-unfitted-level-2: #ffe0b3;
  --sklearn-color-unfitted-level-3: chocolate;
  /* Definition of color scheme for fitted estimators */
  --sklearn-color-fitted-level-0: #f0f8ff;
  --sklearn-color-fitted-level-1: #d4ebff;
  --sklearn-color-fitted-level-2: #b3dbfd;
  --sklearn-color-fitted-level-3: cornflowerblue;

  /* Specific color for light theme */
  --sklearn-color-text-on-default-background: var(--sg-text-color, var(--theme-code-foreground, var(--jp-content-font-color1, black)));
  --sklearn-color-background: var(--sg-background-color, var(--theme-background, var(--jp-layout-color0, white)));
  --sklearn-color-border-box: var(--sg-text-color, var(--theme-code-foreground, var(--jp-content-font-color1, black)));
  --sklearn-color-icon: #696969;

  @media (prefers-color-scheme: dark) {
    /* Redefinition of color scheme for dark theme */
    --sklearn-color-text-on-default-background: var(--sg-text-color, var(--theme-code-foreground, var(--jp-content-font-color1, white)));
    --sklearn-color-background: var(--sg-background-color, var(--theme-background, var(--jp-layout-color0, #111)));
    --sklearn-color-border-box: var(--sg-text-color, var(--theme-code-foreground, var(--jp-content-font-color1, white)));
    --sklearn-color-icon: #878787;
  }
}

#sk-container-id-2 {
  color: var(--sklearn-color-text);
}

#sk-container-id-2 pre {
  padding: 0;
}

#sk-container-id-2 input.sk-hidden--visually {
  border: 0;
  clip: rect(1px 1px 1px 1px);
  clip: rect(1px, 1px, 1px, 1px);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;
}

#sk-container-id-2 div.sk-dashed-wrapped {
  border: 1px dashed var(--sklearn-color-line);
  margin: 0 0.4em 0.5em 0.4em;
  box-sizing: border-box;
  padding-bottom: 0.4em;
  background-color: var(--sklearn-color-background);
}

#sk-container-id-2 div.sk-container {
  /* jupyter's `normalize.less` sets `[hidden] { display: none; }`
     but bootstrap.min.css set `[hidden] { display: none !important; }`
     so we also need the `!important` here to be able to override the
     default hidden behavior on the sphinx rendered scikit-learn.org.
     See: https://github.com/scikit-learn/scikit-learn/issues/21755 */
  display: inline-block !important;
  position: relative;
}

#sk-container-id-2 div.sk-text-repr-fallback {
  display: none;
}

div.sk-parallel-item,
div.sk-serial,
div.sk-item {
  /* draw centered vertical line to link estimators */
  background-image: linear-gradient(var(--sklearn-color-text-on-default-background), var(--sklearn-color-text-on-default-background));
  background-size: 2px 100%;
  background-repeat: no-repeat;
  background-position: center center;
}

/* Parallel-specific style estimator block */

#sk-container-id-2 div.sk-parallel-item::after {
  content: "";
  width: 100%;
  border-bottom: 2px solid var(--sklearn-color-text-on-default-background);
  flex-grow: 1;
}

#sk-container-id-2 div.sk-parallel {
  display: flex;
  align-items: stretch;
  justify-content: center;
  background-color: var(--sklearn-color-background);
  position: relative;
}

#sk-container-id-2 div.sk-parallel-item {
  display: flex;
  flex-direction: column;
}

#sk-container-id-2 div.sk-parallel-item:first-child::after {
  align-self: flex-end;
  width: 50%;
}

#sk-container-id-2 div.sk-parallel-item:last-child::after {
  align-self: flex-start;
  width: 50%;
}

#sk-container-id-2 div.sk-parallel-item:only-child::after {
  width: 0;
}

/* Serial-specific style estimator block */

#sk-container-id-2 div.sk-serial {
  display: flex;
  flex-direction: column;
  align-items: center;
  background-color: var(--sklearn-color-background);
  padding-right: 1em;
  padding-left: 1em;
}


/* Toggleable style: style used for estimator/Pipeline/ColumnTransformer box that is
clickable and can be expanded/collapsed.
- Pipeline and ColumnTransformer use this feature and define the default style
- Estimators will overwrite some part of the style using the `sk-estimator` class
*/

/* Pipeline and ColumnTransformer style (default) */

#sk-container-id-2 div.sk-toggleable {
  /* Default theme specific background. It is overwritten whether we have a
  specific estimator or a Pipeline/ColumnTransformer */
  background-color: var(--sklearn-color-background);
}

/* Toggleable label */
#sk-container-id-2 label.sk-toggleable__label {
  cursor: pointer;
  display: block;
  width: 100%;
  margin-bottom: 0;
  padding: 0.5em;
  box-sizing: border-box;
  text-align: center;
}

#sk-container-id-2 label.sk-toggleable__label-arrow:before {
  /* Arrow on the left of the label */
  content: "▸";
  float: left;
  margin-right: 0.25em;
  color: var(--sklearn-color-icon);
}

#sk-container-id-2 label.sk-toggleable__label-arrow:hover:before {
  color: var(--sklearn-color-text);
}

/* Toggleable content - dropdown */

#sk-container-id-2 div.sk-toggleable__content {
  max-height: 0;
  max-width: 0;
  overflow: hidden;
  text-align: left;
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-0);
}

#sk-container-id-2 div.sk-toggleable__content.fitted {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-0);
}

#sk-container-id-2 div.sk-toggleable__content pre {
  margin: 0.2em;
  border-radius: 0.25em;
  color: var(--sklearn-color-text);
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-0);
}

#sk-container-id-2 div.sk-toggleable__content.fitted pre {
  /* unfitted */
  background-color: var(--sklearn-color-fitted-level-0);
}

#sk-container-id-2 input.sk-toggleable__control:checked~div.sk-toggleable__content {
  /* Expand drop-down */
  max-height: 200px;
  max-width: 100%;
  overflow: auto;
}

#sk-container-id-2 input.sk-toggleable__control:checked~label.sk-toggleable__label-arrow:before {
  content: "▾";
}

/* Pipeline/ColumnTransformer-specific style */

#sk-container-id-2 div.sk-label input.sk-toggleable__control:checked~label.sk-toggleable__label {
  color: var(--sklearn-color-text);
  background-color: var(--sklearn-color-unfitted-level-2);
}

#sk-container-id-2 div.sk-label.fitted input.sk-toggleable__control:checked~label.sk-toggleable__label {
  background-color: var(--sklearn-color-fitted-level-2);
}

/* Estimator-specific style */

/* Colorize estimator box */
#sk-container-id-2 div.sk-estimator input.sk-toggleable__control:checked~label.sk-toggleable__label {
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-2);
}

#sk-container-id-2 div.sk-estimator.fitted input.sk-toggleable__control:checked~label.sk-toggleable__label {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-2);
}

#sk-container-id-2 div.sk-label label.sk-toggleable__label,
#sk-container-id-2 div.sk-label label {
  /* The background is the default theme color */
  color: var(--sklearn-color-text-on-default-background);
}

/* On hover, darken the color of the background */
#sk-container-id-2 div.sk-label:hover label.sk-toggleable__label {
  color: var(--sklearn-color-text);
  background-color: var(--sklearn-color-unfitted-level-2);
}

/* Label box, darken color on hover, fitted */
#sk-container-id-2 div.sk-label.fitted:hover label.sk-toggleable__label.fitted {
  color: var(--sklearn-color-text);
  background-color: var(--sklearn-color-fitted-level-2);
}

/* Estimator label */

#sk-container-id-2 div.sk-label label {
  font-family: monospace;
  font-weight: bold;
  display: inline-block;
  line-height: 1.2em;
}

#sk-container-id-2 div.sk-label-container {
  text-align: center;
}

/* Estimator-specific */
#sk-container-id-2 div.sk-estimator {
  font-family: monospace;
  border: 1px dotted var(--sklearn-color-border-box);
  border-radius: 0.25em;
  box-sizing: border-box;
  margin-bottom: 0.5em;
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-0);
}

#sk-container-id-2 div.sk-estimator.fitted {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-0);
}

/* on hover */
#sk-container-id-2 div.sk-estimator:hover {
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-2);
}

#sk-container-id-2 div.sk-estimator.fitted:hover {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-2);
}

/* Specification for estimator info (e.g. "i" and "?") */

/* Common style for "i" and "?" */

.sk-estimator-doc-link,
a:link.sk-estimator-doc-link,
a:visited.sk-estimator-doc-link {
  float: right;
  font-size: smaller;
  line-height: 1em;
  font-family: monospace;
  background-color: var(--sklearn-color-background);
  border-radius: 1em;
  height: 1em;
  width: 1em;
  text-decoration: none !important;
  margin-left: 1ex;
  /* unfitted */
  border: var(--sklearn-color-unfitted-level-1) 1pt solid;
  color: var(--sklearn-color-unfitted-level-1);
}

.sk-estimator-doc-link.fitted,
a:link.sk-estimator-doc-link.fitted,
a:visited.sk-estimator-doc-link.fitted {
  /* fitted */
  border: var(--sklearn-color-fitted-level-1) 1pt solid;
  color: var(--sklearn-color-fitted-level-1);
}

/* On hover */
div.sk-estimator:hover .sk-estimator-doc-link:hover,
.sk-estimator-doc-link:hover,
div.sk-label-container:hover .sk-estimator-doc-link:hover,
.sk-estimator-doc-link:hover {
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-3);
  color: var(--sklearn-color-background);
  text-decoration: none;
}

div.sk-estimator.fitted:hover .sk-estimator-doc-link.fitted:hover,
.sk-estimator-doc-link.fitted:hover,
div.sk-label-container:hover .sk-estimator-doc-link.fitted:hover,
.sk-estimator-doc-link.fitted:hover {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-3);
  color: var(--sklearn-color-background);
  text-decoration: none;
}

/* Span, style for the box shown on hovering the info icon */
.sk-estimator-doc-link span {
  display: none;
  z-index: 9999;
  position: relative;
  font-weight: normal;
  right: .2ex;
  padding: .5ex;
  margin: .5ex;
  width: min-content;
  min-width: 20ex;
  max-width: 50ex;
  color: var(--sklearn-color-text);
  box-shadow: 2pt 2pt 4pt #999;
  /* unfitted */
  background: var(--sklearn-color-unfitted-level-0);
  border: .5pt solid var(--sklearn-color-unfitted-level-3);
}

.sk-estimator-doc-link.fitted span {
  /* fitted */
  background: var(--sklearn-color-fitted-level-0);
  border: var(--sklearn-color-fitted-level-3);
}

.sk-estimator-doc-link:hover span {
  display: block;
}

/* "?"-specific style due to the `<a>` HTML tag */

#sk-container-id-2 a.estimator_doc_link {
  float: right;
  font-size: 1rem;
  line-height: 1em;
  font-family: monospace;
  background-color: var(--sklearn-color-background);
  border-radius: 1rem;
  height: 1rem;
  width: 1rem;
  text-decoration: none;
  /* unfitted */
  color: var(--sklearn-color-unfitted-level-1);
  border: var(--sklearn-color-unfitted-level-1) 1pt solid;
}

#sk-container-id-2 a.estimator_doc_link.fitted {
  /* fitted */
  border: var(--sklearn-color-fitted-level-1) 1pt solid;
  color: var(--sklearn-color-fitted-level-1);
}

/* On hover */
#sk-container-id-2 a.estimator_doc_link:hover {
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-3);
  color: var(--sklearn-color-background);
  text-decoration: none;
}

#sk-container-id-2 a.estimator_doc_link.fitted:hover {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-3);
}
</style><div id="sk-container-id-2" class="sk-top-container"><div class="sk-text-repr-fallback"><pre>PCA(n_components=2)</pre><b>In a Jupyter environment, please rerun this cell to show the HTML representation or trust the notebook. <br />On GitHub, the HTML representation is unable to render, please try loading this page with nbviewer.org.</b></div><div class="sk-container" hidden><div class="sk-item"><div class="sk-estimator fitted sk-toggleable"><input class="sk-toggleable__control sk-hidden--visually" id="sk-estimator-id-2" type="checkbox" checked><label for="sk-estimator-id-2" class="sk-toggleable__label fitted sk-toggleable__label-arrow fitted">&nbsp;&nbsp;PCA<a class="sk-estimator-doc-link fitted" rel="noreferrer" target="_blank" href="https://scikit-learn.org/1.5/modules/generated/sklearn.decomposition.PCA.html">?<span>Documentation for PCA</span></a><span class="sk-estimator-doc-link fitted">i<span>Fitted</span></span></label><div class="sk-toggleable__content fitted"><pre>PCA(n_components=2)</pre></div> </div></div></div></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">expl</span> <span class="o">=</span> <span class="n">pca1</span><span class="o">.</span><span class="n">explained_variance_ratio_</span><span class="o">*</span><span class="mi">100</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;Con las </span><span class="si">{}</span><span class="s2"> primeras componentes principales, la cantidad de varianza explicada es: </span><span class="si">{:.2f}</span><span class="s2">% </span>
<span class="s2">      &quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">n_components</span><span class="p">,</span><span class="nb">sum</span><span class="p">(</span><span class="n">expl</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span> <span class="n">n_components</span><span class="p">])))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Con las 2 primeras componentes principales, la cantidad de varianza explicada es: 82.95% 
      
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Loadings.</span>
<span class="n">plot_loadings_heatmap</span><span class="p">(</span><span class="n">pca1</span><span class="p">,</span> <span class="n">df1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<p>Recuerde que los valores que se generan apartir de la primera componente principal es una combinación lineal de la forma:</p>
<div class="math notranslate nohighlight">
\[Y_1 = 0.45*longitudTotal +0.46*exetensionAlas+0.45*longitudPicoCebeza+0.47*longitudHumero+0.4*longitudQuilla\]</div>
<p>Vemos que todos los coeficientes son positivos, y además, aproximadamente el <span class="math notranslate nohighlight">\(72.3\%\)</span> de la variación está relacionada con las diferencias de tamaño, luego <span class="math notranslate nohighlight">\(Y_1\)</span> es un indicador del <em><strong>tamaño de las aves</strong></em>.</p>
<p>De manera completamente análoga, <span class="math notranslate nohighlight">\(Y_2\)</span>, reúne las variables que registran la <em><strong>forma de las aves</strong></em>, pues se contrastan las features: extensión de las alas, longitud de pico y cabeza, extensión del húmero con longitud de la quilla. Mientras el primer grupo aumenta, la longitud de la quilla disminuye y viceversa.</p>
<p>La información transformada se encuentra es el siguiente código.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pca1_trans</span> <span class="o">=</span> <span class="n">pca1</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X_scaled1</span><span class="p">)</span>
<span class="n">pca1_trans</span> <span class="o">=</span>  <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pca1_trans</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">df1</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;PC1&quot;</span><span class="p">,</span><span class="s2">&quot;PC2&quot;</span><span class="p">])</span>
<span class="n">pca1_trans</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PC1</th>
      <th>PC2</th>
    </tr>
    <tr>
      <th>pajaro</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>0.064955</td>
      <td>-0.607064</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-2.202907</td>
      <td>-0.446884</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-1.157437</td>
      <td>0.019454</td>
    </tr>
    <tr>
      <th>4</th>
      <td>-2.335015</td>
      <td>0.173775</td>
    </tr>
    <tr>
      <th>5</th>
      <td>-0.298100</td>
      <td>-0.672101</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Se ajustó un PCA a una data de tamaño:&quot;</span><span class="p">,</span><span class="n">df1</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Se obtuvo un ajuste por PCA de tamaño:&quot;</span><span class="p">,</span><span class="n">pca1_trans</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Se ajustó un PCA a una data de tamaño: (49, 5)
Se obtuvo un ajuste por PCA de tamaño: (49, 2)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">biplot</span><span class="p">(</span><span class="n">pca1</span><span class="p">,</span><span class="n">df1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<p>Teniendo en cuenta lo comentado en el párrafo anterior, la ave número 31 (arriba en el centro) tiene el valor más alto respecto a la longitud de la quilla. Las aves 30, 25, 37 (a la izquierda) tienen valores bajos (con respecto a la medía) en varias features (muchas ponderan en el primer componente principal). En constraste tenemos las aves 29, 40. La ave “propotípo” esta en el centro del plot (ave 41).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df1</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>longitud_total            157.979592
extension_alas            241.326531
longitud_pico_y_cabeza     31.459184
longitud_humero            18.469388
longitud_quilla            20.826531
dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">view_index</span><span class="p">(</span><span class="n">df1</span><span class="p">,</span> <span class="p">[</span><span class="mi">31</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">25</span><span class="p">,</span><span class="mi">37</span><span class="p">,</span><span class="mi">29</span><span class="p">,</span><span class="mi">40</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>longitud_total</th>
      <th>extension_alas</th>
      <th>longitud_pico_y_cabeza</th>
      <th>longitud_humero</th>
      <th>longitud_quilla</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>31</th>
      <td>162.0</td>
      <td>239.0</td>
      <td>30.3</td>
      <td>18.0</td>
      <td>23.1</td>
    </tr>
    <tr>
      <th>30</th>
      <td>153.0</td>
      <td>231.0</td>
      <td>30.1</td>
      <td>17.3</td>
      <td>19.8</td>
    </tr>
    <tr>
      <th>25</th>
      <td>152.0</td>
      <td>232.0</td>
      <td>30.3</td>
      <td>17.2</td>
      <td>19.8</td>
    </tr>
    <tr>
      <th>37</th>
      <td>152.0</td>
      <td>230.0</td>
      <td>30.4</td>
      <td>17.3</td>
      <td>18.6</td>
    </tr>
    <tr>
      <th>29</th>
      <td>165.0</td>
      <td>245.0</td>
      <td>33.1</td>
      <td>19.8</td>
      <td>22.7</td>
    </tr>
    <tr>
      <th>40</th>
      <td>163.0</td>
      <td>249.0</td>
      <td>33.4</td>
      <td>19.5</td>
      <td>22.8</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>El siguiente plot:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">biplot1</span><span class="p">(</span><span class="n">pca1</span><span class="p">,</span> <span class="n">df1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<p>se puede observar como el primer eje en el plano factorial está influenciado por la longitud del húmero y la longitud total, para el segundo eje factorial, longitud de la quilla y longitud del pico y cabeza.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## Selección natural.</span>
<span class="n">temp</span> <span class="o">=</span> <span class="n">pca1_trans</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">temp</span><span class="p">[</span><span class="s2">&quot;sobrevivio&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;vivo&quot;</span> <span class="k">if</span> <span class="n">x</span><span class="o">&lt;</span><span class="mi">22</span> <span class="k">else</span> <span class="s2">&quot;muerto&quot;</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">df1</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">values</span><span class="p">]</span>

<span class="n">px</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
    <span class="n">temp</span><span class="p">,</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">&quot;PC1&quot;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">&quot;PC2&quot;</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">&quot;sobrevivio&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
</section>
<section id="ejercicio-en-clase">
<h2><em><strong>Ejercicio en clase.</strong></em><a class="headerlink" href="#ejercicio-en-clase" title="Link to this heading">#</a></h2>
<p>Realizar un PCA con la base de emisiones y teniendo como individuo el año. Realice toda la rutina presentada en clase, busque generar sus propios análisis haciendo uso de las nuevas herramientas presentados en este cuaderno.</p>
</section>
<section id="retomando-un-ejemplo-anterior">
<h2><em><strong>Retomando un ejemplo anterior.</strong></em><a class="headerlink" href="#retomando-un-ejemplo-anterior" title="Link to this heading">#</a></h2>
<p>Consideremos el dataset <code class="docutils literal notranslate"><span class="pre">Global_Carbon_Budget_2018.csv</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">url_base</span> <span class="o">=</span> <span class="s2">&quot;https://raw.githubusercontent.com/lacamposm/Metodos_Estadisticos/main/data/&quot;</span>
<span class="n">df_name</span> <span class="o">=</span> <span class="s2">&quot;Global_Carbon_Budget_2018.csv&quot;</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url_base</span> <span class="o">+</span> <span class="n">df_name</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">,</span> <span class="n">decimal</span><span class="o">=</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="n">index_col</span> <span class="o">=</span> <span class="s2">&quot;Year&quot;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>fossil fuel and industry</th>
      <th>land-use change emissions</th>
      <th>atmospheric growth</th>
      <th>ocean sink</th>
      <th>land sink</th>
      <th>budget imbalance</th>
    </tr>
    <tr>
      <th>Year</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1750</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>-0.08</td>
      <td>NaN</td>
      <td>0.09</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1751</th>
      <td>0.0</td>
      <td>NaN</td>
      <td>-0.07</td>
      <td>NaN</td>
      <td>-0.53</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1752</th>
      <td>0.0</td>
      <td>NaN</td>
      <td>-0.07</td>
      <td>NaN</td>
      <td>-0.27</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1753</th>
      <td>0.0</td>
      <td>NaN</td>
      <td>-0.07</td>
      <td>NaN</td>
      <td>-0.17</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1754</th>
      <td>0.0</td>
      <td>NaN</td>
      <td>-0.06</td>
      <td>NaN</td>
      <td>-0.33</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<center>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>feature</p></th>
<th class="head text-right"><p>Traducción</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p>fossil fuel and industry</p></td>
<td class="text-right"><p>Combustible fósil e industría</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>land-use change emissions</p></td>
<td class="text-right"><p>emisiones de cambio de uso de la tierra</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>atmospheric growth</p></td>
<td class="text-right"><p>crecimiento atmosférico</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>ocean sink</p></td>
<td class="text-right"><p>sumidero del oceano</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>land sink</p></td>
<td class="text-right"><p>sumidero de tierra</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>budget imbalance</p></td>
<td class="text-right"><p>desequilibrio presupuestario</p></td>
</tr>
</tbody>
</table>
</div>
</center>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## Rutina escalamiento.</span>
<span class="n">df_pca</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;budget imbalance&quot;</span><span class="p">])</span>
<span class="n">df_pca</span> <span class="o">=</span> <span class="n">df_pca</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>            
<span class="n">scaler</span> <span class="o">=</span> <span class="n">StandardScaler</span><span class="p">()</span>           
<span class="n">scaler</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df_pca</span><span class="p">)</span>                  
<span class="n">X_scaled</span> <span class="o">=</span> <span class="n">scaler</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">df_pca</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">X_scaled</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">df_pca</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">df_pca</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>fossil fuel and industry</th>
      <th>land-use change emissions</th>
      <th>atmospheric growth</th>
      <th>ocean sink</th>
      <th>land sink</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>fossil fuel and industry</th>
      <td>1.000000</td>
      <td>0.404771</td>
      <td>0.969705</td>
      <td>0.988774</td>
      <td>0.727075</td>
    </tr>
    <tr>
      <th>land-use change emissions</th>
      <td>0.404771</td>
      <td>1.000000</td>
      <td>0.293668</td>
      <td>0.426617</td>
      <td>0.295279</td>
    </tr>
    <tr>
      <th>atmospheric growth</th>
      <td>0.969705</td>
      <td>0.293668</td>
      <td>1.000000</td>
      <td>0.966279</td>
      <td>0.711759</td>
    </tr>
    <tr>
      <th>ocean sink</th>
      <td>0.988774</td>
      <td>0.426617</td>
      <td>0.966279</td>
      <td>1.000000</td>
      <td>0.726006</td>
    </tr>
    <tr>
      <th>land sink</th>
      <td>0.727075</td>
      <td>0.295279</td>
      <td>0.711759</td>
      <td>0.726006</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Rutina PCA</span>
<span class="n">pca</span> <span class="o">=</span> <span class="n">PCA</span><span class="p">()</span>
<span class="n">pca</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_scaled</span><span class="p">)</span>                   
<span class="n">pca_array</span> <span class="o">=</span> <span class="n">pca</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X_scaled</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot de sedimentación</span>
<span class="n">sedimentacion</span><span class="p">(</span><span class="n">pca</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">name_columns</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;PC</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">pca_array</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])]</span>
<span class="n">pca_trans</span> <span class="o">=</span>  <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pca_array</span><span class="p">,</span> <span class="n">index</span> <span class="o">=</span> <span class="n">df_pca</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">columns</span> <span class="o">=</span> <span class="n">name_columns</span><span class="p">)</span>
<span class="n">pca_trans</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PC1</th>
      <th>PC2</th>
      <th>PC3</th>
      <th>PC4</th>
      <th>PC5</th>
    </tr>
    <tr>
      <th>Year</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1850</th>
      <td>-2.095784</td>
      <td>-1.196339</td>
      <td>0.250146</td>
      <td>-0.083911</td>
      <td>0.128713</td>
    </tr>
    <tr>
      <th>1851</th>
      <td>-2.381818</td>
      <td>-1.092507</td>
      <td>-0.303762</td>
      <td>-0.142315</td>
      <td>0.118502</td>
    </tr>
    <tr>
      <th>1852</th>
      <td>-2.263906</td>
      <td>-1.095204</td>
      <td>-0.005834</td>
      <td>-0.179125</td>
      <td>0.122529</td>
    </tr>
    <tr>
      <th>1853</th>
      <td>-2.378335</td>
      <td>-1.053040</td>
      <td>-0.175729</td>
      <td>-0.224897</td>
      <td>0.123368</td>
    </tr>
    <tr>
      <th>1854</th>
      <td>-2.352181</td>
      <td>-1.059783</td>
      <td>-0.066733</td>
      <td>-0.261231</td>
      <td>0.126965</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pca</span><span class="o">.</span><span class="n">components_</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[ 0.50625924,  0.25177241,  0.49391515,  0.50715776,  0.42326242],
       [-0.08557012,  0.95984491, -0.2149806 , -0.0587595 , -0.14733009],
       [-0.24669646,  0.03728889, -0.28105587, -0.24452182,  0.89384958],
       [-0.41578379,  0.11667435,  0.79418177, -0.42733142,  0.01319523],
       [ 0.70897393,  0.01746506, -0.01068107, -0.70493636, -0.0012577 ]])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot loadings.</span>
<span class="n">plot_loadings_heatmap</span><span class="p">(</span><span class="n">pca</span><span class="p">,</span><span class="n">df_pca</span><span class="p">,</span><span class="n">n_compo</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plot_loadings_bar</span><span class="p">(</span><span class="n">pca</span><span class="p">,</span> <span class="n">df_pca</span><span class="p">,</span> <span class="n">n_compo</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">biplot</span><span class="p">(</span><span class="n">pca</span><span class="p">,</span> <span class="n">df_pca</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_pca</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>fossil fuel and industry     1.999677
land-use change emissions    1.182645
atmospheric growth           1.204452
ocean sink                   0.834645
land sink                    1.008129
dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">view_index</span><span class="p">(</span><span class="n">df_pca</span><span class="p">,[</span><span class="mi">1867</span><span class="p">,</span><span class="mi">1958</span><span class="p">,</span><span class="mi">1997</span><span class="p">,</span><span class="mi">1999</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>fossil fuel and industry</th>
      <th>land-use change emissions</th>
      <th>atmospheric growth</th>
      <th>ocean sink</th>
      <th>land sink</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1867</th>
      <td>0.13</td>
      <td>0.67</td>
      <td>0.39</td>
      <td>0.25</td>
      <td>0.55</td>
    </tr>
    <tr>
      <th>1958</th>
      <td>2.33</td>
      <td>1.79</td>
      <td>1.02</td>
      <td>0.81</td>
      <td>-0.06</td>
    </tr>
    <tr>
      <th>1997</th>
      <td>6.53</td>
      <td>1.78</td>
      <td>3.39</td>
      <td>2.14</td>
      <td>2.98</td>
    </tr>
    <tr>
      <th>1999</th>
      <td>6.53</td>
      <td>1.20</td>
      <td>3.43</td>
      <td>2.28</td>
      <td>3.70</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">biplot1</span><span class="p">(</span><span class="n">pca</span><span class="p">,</span><span class="n">df_pca</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
</section>
<section id="ejemplo-2">
<h2><em><strong>Ejemplo 2.</strong></em><a class="headerlink" href="#ejemplo-2" title="Link to this heading">#</a></h2>
<p>Vamos a considerar el dataframe <code class="docutils literal notranslate"><span class="pre">Delitos_Colombia.csv</span></code> que contiene el número de delitos por departamento, en distintas categorías. Toda la información es numérica.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">url_base</span> <span class="o">=</span> <span class="s2">&quot;https://raw.githubusercontent.com/lacamposm/Metodos_Estadisticos/main/data/&quot;</span>
<span class="n">df_name2</span> <span class="o">=</span> <span class="s2">&quot;Delitos_Colombia.csv&quot;</span>
<span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url_base</span> <span class="o">+</span> <span class="n">df_name2</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">,</span> <span class="n">decimal</span><span class="o">=</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">df2</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Delitos_Sexuales</th>
      <th>Homicidios</th>
      <th>Transito</th>
      <th>Asalto</th>
      <th>Intrafamiliar</th>
      <th>Poblacion</th>
    </tr>
    <tr>
      <th>Departamento</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Antioquia</th>
      <td>2163</td>
      <td>375</td>
      <td>5079</td>
      <td>11897</td>
      <td>8205</td>
      <td>6690977</td>
    </tr>
    <tr>
      <th>Atlantico</th>
      <td>1042</td>
      <td>85</td>
      <td>1928</td>
      <td>59</td>
      <td>3659</td>
      <td>2546138</td>
    </tr>
    <tr>
      <th>Bogota_D.C.</th>
      <td>4211</td>
      <td>1463</td>
      <td>725</td>
      <td>2725</td>
      <td>19811</td>
      <td>8181047</td>
    </tr>
    <tr>
      <th>Bolivar</th>
      <td>944</td>
      <td>28</td>
      <td>922</td>
      <td>3812</td>
      <td>2085</td>
      <td>2171558</td>
    </tr>
    <tr>
      <th>Boyaca</th>
      <td>517</td>
      <td>95</td>
      <td>1167</td>
      <td>4084</td>
      <td>2707</td>
      <td>1281979</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df2</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span><span class="o">.</span><span class="n">T</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Delitos_Sexuales</th>
      <td>33.0</td>
      <td>6.484545e+02</td>
      <td>8.246769e+02</td>
      <td>0.0</td>
      <td>204.0</td>
      <td>420.0</td>
      <td>616.0</td>
      <td>4211.0</td>
    </tr>
    <tr>
      <th>Homicidios</th>
      <td>33.0</td>
      <td>1.161818e+02</td>
      <td>2.596099e+02</td>
      <td>0.0</td>
      <td>17.0</td>
      <td>58.0</td>
      <td>81.0</td>
      <td>1463.0</td>
    </tr>
    <tr>
      <th>Transito</th>
      <td>33.0</td>
      <td>1.173667e+03</td>
      <td>1.371468e+03</td>
      <td>0.0</td>
      <td>143.0</td>
      <td>861.0</td>
      <td>1248.0</td>
      <td>5599.0</td>
    </tr>
    <tr>
      <th>Asalto</th>
      <td>33.0</td>
      <td>2.816121e+03</td>
      <td>3.001322e+03</td>
      <td>1.0</td>
      <td>654.0</td>
      <td>2243.0</td>
      <td>3766.0</td>
      <td>11897.0</td>
    </tr>
    <tr>
      <th>Intrafamiliar</th>
      <td>33.0</td>
      <td>2.059242e+03</td>
      <td>3.590915e+03</td>
      <td>2.0</td>
      <td>411.0</td>
      <td>1083.0</td>
      <td>2142.0</td>
      <td>19811.0</td>
    </tr>
    <tr>
      <th>Poblacion</th>
      <td>33.0</td>
      <td>1.510143e+06</td>
      <td>1.827319e+06</td>
      <td>43446.0</td>
      <td>375258.0</td>
      <td>1040193.0</td>
      <td>1788648.0</td>
      <td>8181047.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Seleccionamos las cuantitativas (ACP solo trabaja con cuantitativas). Cuando sea el caso seleccionamos </span>
<span class="c1"># así: -----&gt; cuanti = df2.select_dtypes(np.number)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">df2</span><span class="o">.</span><span class="n">corr</span><span class="p">(),</span> <span class="n">annot</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">cmap</span> <span class="o">=</span> <span class="s2">&quot;PuBu&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/6db7cef9d9264aba28286e7aedd732b1c3f760ad1b3610f2eb5384cc13e78ee3.png" src="../_images/6db7cef9d9264aba28286e7aedd732b1c3f760ad1b3610f2eb5384cc13e78ee3.png" />
</div>
</div>
<p>Notemos que las diferencias en las desviaciones en las distintas features es bastante alta, debemos por tanto realizar unas “mejoras” en nuestro dataset.</p>
<ol class="arabic simple">
<li><p>Para realizar un mejor análisis vamos considerar la siguiente tasa (para todas las variables):</p></li>
</ol>
<div class="math notranslate nohighlight">
\[Tasa Delitos Sexuales=100.000\times \frac{Delitos Sexuales}{Poblacion}\]</div>
<p>la cual representa la incidencia por cada <span class="math notranslate nohighlight">\(100.000\)</span> habitantes.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df2_pca</span> <span class="o">=</span> <span class="n">df2</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">df2_pca</span><span class="p">[</span><span class="s2">&quot;DSex_p&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100000</span><span class="o">*</span><span class="n">df2_pca</span><span class="p">[</span><span class="s2">&quot;Delitos_Sexuales&quot;</span><span class="p">]</span><span class="o">/</span><span class="n">df2_pca</span><span class="p">[</span><span class="s2">&quot;Poblacion&quot;</span><span class="p">]</span>
<span class="n">df2_pca</span><span class="p">[</span><span class="s2">&quot;DHom_p&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100000</span><span class="o">*</span><span class="n">df2_pca</span><span class="p">[</span><span class="s2">&quot;Homicidios&quot;</span><span class="p">]</span><span class="o">/</span><span class="n">df2_pca</span><span class="p">[</span><span class="s2">&quot;Poblacion&quot;</span><span class="p">]</span>
<span class="n">df2_pca</span><span class="p">[</span><span class="s2">&quot;DIntra_p&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100000</span><span class="o">*</span><span class="n">df2_pca</span><span class="p">[</span><span class="s2">&quot;Intrafamiliar&quot;</span><span class="p">]</span><span class="o">/</span><span class="n">df2_pca</span><span class="p">[</span><span class="s2">&quot;Poblacion&quot;</span><span class="p">]</span>
<span class="n">df2_pca</span><span class="p">[</span><span class="s2">&quot;DTransi_p&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100000</span><span class="o">*</span><span class="n">df2_pca</span><span class="p">[</span><span class="s2">&quot;Transito&quot;</span><span class="p">]</span><span class="o">/</span><span class="n">df2_pca</span><span class="p">[</span><span class="s2">&quot;Poblacion&quot;</span><span class="p">]</span>
<span class="n">df2_pca</span><span class="p">[</span><span class="s2">&quot;DAsal_p&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100000</span><span class="o">*</span><span class="n">df2_pca</span><span class="p">[</span><span class="s2">&quot;Asalto&quot;</span><span class="p">]</span><span class="o">/</span><span class="n">df2_pca</span><span class="p">[</span><span class="s2">&quot;Poblacion&quot;</span><span class="p">]</span>
<span class="n">df2_pca</span> <span class="o">=</span> <span class="n">df2_pca</span><span class="p">[[</span><span class="s2">&quot;DSex_p&quot;</span><span class="p">,</span> <span class="s2">&quot;DHom_p&quot;</span><span class="p">,</span> <span class="s2">&quot;DIntra_p&quot;</span><span class="p">,</span> <span class="s2">&quot;DTransi_p&quot;</span><span class="p">,</span> <span class="s2">&quot;DAsal_p&quot;</span><span class="p">]]</span>
<span class="n">df2_pca</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>DSex_p</th>
      <th>DHom_p</th>
      <th>DIntra_p</th>
      <th>DTransi_p</th>
      <th>DAsal_p</th>
    </tr>
    <tr>
      <th>Departamento</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Antioquia</th>
      <td>32.327118</td>
      <td>5.604563</td>
      <td>122.627831</td>
      <td>75.908197</td>
      <td>177.806619</td>
    </tr>
    <tr>
      <th>Atlantico</th>
      <td>40.924726</td>
      <td>3.338389</td>
      <td>143.707843</td>
      <td>75.722526</td>
      <td>2.317235</td>
    </tr>
    <tr>
      <th>Bogota_D.C.</th>
      <td>51.472629</td>
      <td>17.882797</td>
      <td>242.157269</td>
      <td>8.861946</td>
      <td>33.308695</td>
    </tr>
    <tr>
      <th>Bolivar</th>
      <td>43.471093</td>
      <td>1.289397</td>
      <td>96.014014</td>
      <td>42.457996</td>
      <td>175.542168</td>
    </tr>
    <tr>
      <th>Boyaca</th>
      <td>40.328274</td>
      <td>7.410418</td>
      <td>211.157905</td>
      <td>91.031132</td>
      <td>318.569961</td>
    </tr>
    <tr>
      <th>Caldas</th>
      <td>44.573234</td>
      <td>6.540091</td>
      <td>98.101361</td>
      <td>125.569743</td>
      <td>225.683439</td>
    </tr>
    <tr>
      <th>Caqueta</th>
      <td>44.532928</td>
      <td>3.627116</td>
      <td>90.476402</td>
      <td>24.382282</td>
      <td>131.785226</td>
    </tr>
    <tr>
      <th>Cauca</th>
      <td>29.657980</td>
      <td>4.378083</td>
      <td>104.156001</td>
      <td>60.798859</td>
      <td>167.920658</td>
    </tr>
    <tr>
      <th>Cesar</th>
      <td>52.644568</td>
      <td>4.128986</td>
      <td>131.564501</td>
      <td>79.013773</td>
      <td>258.718494</td>
    </tr>
    <tr>
      <th>Cordoba</th>
      <td>29.631319</td>
      <td>0.782714</td>
      <td>36.172573</td>
      <td>49.255080</td>
      <td>95.938385</td>
    </tr>
    <tr>
      <th>Cundinamarca</th>
      <td>52.028394</td>
      <td>12.873372</td>
      <td>22.359015</td>
      <td>91.611340</td>
      <td>367.051584</td>
    </tr>
    <tr>
      <th>Choco</th>
      <td>30.863838</td>
      <td>0.388224</td>
      <td>56.874871</td>
      <td>19.605331</td>
      <td>102.491236</td>
    </tr>
    <tr>
      <th>Huila</th>
      <td>41.602307</td>
      <td>5.680636</td>
      <td>184.286525</td>
      <td>92.143262</td>
      <td>318.700404</td>
    </tr>
    <tr>
      <th>La_Guajira</th>
      <td>30.667386</td>
      <td>2.595672</td>
      <td>72.390412</td>
      <td>18.650385</td>
      <td>119.593191</td>
    </tr>
    <tr>
      <th>Magdalena</th>
      <td>38.504130</td>
      <td>1.925206</td>
      <td>141.849215</td>
      <td>53.135699</td>
      <td>230.485722</td>
    </tr>
    <tr>
      <th>Meta</th>
      <td>81.245475</td>
      <td>9.245853</td>
      <td>272.359227</td>
      <td>108.491234</td>
      <td>370.424286</td>
    </tr>
    <tr>
      <th>narigno</th>
      <td>10.998723</td>
      <td>4.255787</td>
      <td>82.960215</td>
      <td>98.988504</td>
      <td>199.248218</td>
    </tr>
    <tr>
      <th>Norte_de_Santander</th>
      <td>26.880059</td>
      <td>4.887283</td>
      <td>156.968044</td>
      <td>76.830970</td>
      <td>235.883297</td>
    </tr>
    <tr>
      <th>Quindio</th>
      <td>69.570057</td>
      <td>14.087937</td>
      <td>169.750939</td>
      <td>211.666899</td>
      <td>354.633366</td>
    </tr>
    <tr>
      <th>Risaralda</th>
      <td>55.797805</td>
      <td>7.543037</td>
      <td>144.247660</td>
      <td>222.054599</td>
      <td>232.594185</td>
    </tr>
    <tr>
      <th>Santander</th>
      <td>62.127724</td>
      <td>8.943714</td>
      <td>19.035284</td>
      <td>156.730216</td>
      <td>357.461592</td>
    </tr>
    <tr>
      <th>Sucre</th>
      <td>46.064874</td>
      <td>1.938373</td>
      <td>123.485788</td>
      <td>30.899953</td>
      <td>192.469077</td>
    </tr>
    <tr>
      <th>Tolima</th>
      <td>43.381595</td>
      <td>4.788877</td>
      <td>150.849638</td>
      <td>186.132397</td>
      <td>300.220359</td>
    </tr>
    <tr>
      <th>Valle_del_Cauca</th>
      <td>39.341767</td>
      <td>5.950679</td>
      <td>108.205629</td>
      <td>117.730920</td>
      <td>198.832574</td>
    </tr>
    <tr>
      <th>Arauca</th>
      <td>82.745985</td>
      <td>15.884274</td>
      <td>316.577271</td>
      <td>79.421369</td>
      <td>291.827356</td>
    </tr>
    <tr>
      <th>Casanare</th>
      <td>69.285665</td>
      <td>15.456033</td>
      <td>344.562941</td>
      <td>160.422962</td>
      <td>368.812923</td>
    </tr>
    <tr>
      <th>Putumayo</th>
      <td>56.840979</td>
      <td>6.129910</td>
      <td>114.517855</td>
      <td>39.844412</td>
      <td>194.485311</td>
    </tr>
    <tr>
      <th>San_Andres</th>
      <td>29.331871</td>
      <td>5.101195</td>
      <td>300.970502</td>
      <td>137.732264</td>
      <td>629.997577</td>
    </tr>
    <tr>
      <th>Amazonas</th>
      <td>83.724470</td>
      <td>3.805658</td>
      <td>258.784727</td>
      <td>30.445262</td>
      <td>318.406698</td>
    </tr>
    <tr>
      <th>Guainia</th>
      <td>85.163191</td>
      <td>39.129034</td>
      <td>135.800764</td>
      <td>64.447820</td>
      <td>202.550292</td>
    </tr>
    <tr>
      <th>Guaviare</th>
      <td>49.210474</td>
      <td>5.180050</td>
      <td>113.961098</td>
      <td>18.130175</td>
      <td>123.457856</td>
    </tr>
    <tr>
      <th>Vaupes</th>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>4.451567</td>
      <td>0.000000</td>
      <td>2.225783</td>
    </tr>
    <tr>
      <th>Vichada</th>
      <td>15.528754</td>
      <td>1.294063</td>
      <td>38.821885</td>
      <td>51.762514</td>
      <td>78.937833</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">df2_pca</span><span class="o">.</span><span class="n">corr</span><span class="p">(),</span> <span class="n">annot</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">cmap</span> <span class="o">=</span> <span class="s2">&quot;PuBu&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/0ea5ad6b6c0ffc52506012d32949b8b194160b0cb7aef4954f3942140772008f.png" src="../_images/0ea5ad6b6c0ffc52506012d32949b8b194160b0cb7aef4954f3942140772008f.png" />
</div>
</div>
<ol class="arabic simple" start="2">
<li><p>Vamos  escalar la información para buscar mitigar la variables que tienen altas varianzas, ya que estas se llevarian el mayor de la variabilidad total. Deseamos que su variabilidad sea mitigada.</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">scaler2</span> <span class="o">=</span> <span class="n">StandardScaler</span><span class="p">()</span>            <span class="c1"># Cargando el escalador estandar</span>
<span class="n">scaler2</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df2_pca</span><span class="p">)</span>                  <span class="c1"># Calcula las medias y las desviaciones</span>
<span class="n">X_scaled</span> <span class="o">=</span> <span class="n">scaler2</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">df2_pca</span><span class="p">)</span> <span class="c1"># Estandariza la data.</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">X_scaled</span><span class="p">,</span> <span class="n">index</span> <span class="o">=</span> <span class="n">df2_pca</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">columns</span> <span class="o">=</span> <span class="n">df2_pca</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>DSex_p</th>
      <th>DHom_p</th>
      <th>DIntra_p</th>
      <th>DTransi_p</th>
      <th>DAsal_p</th>
    </tr>
    <tr>
      <th>Departamento</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Antioquia</th>
      <td>-0.663883</td>
      <td>-0.196509</td>
      <td>-0.199243</td>
      <td>-0.104096</td>
      <td>-0.361624</td>
    </tr>
    <tr>
      <th>Atlantico</th>
      <td>-0.239343</td>
      <td>-0.508407</td>
      <td>0.046727</td>
      <td>-0.107368</td>
      <td>-1.747823</td>
    </tr>
    <tr>
      <th>Bogota_D.C.</th>
      <td>0.281500</td>
      <td>1.493371</td>
      <td>1.195478</td>
      <td>-1.285749</td>
      <td>-1.503020</td>
    </tr>
    <tr>
      <th>Bolivar</th>
      <td>-0.113606</td>
      <td>-0.790414</td>
      <td>-0.509785</td>
      <td>-0.693637</td>
      <td>-0.379511</td>
    </tr>
    <tr>
      <th>Boyaca</th>
      <td>-0.268795</td>
      <td>0.052035</td>
      <td>0.833764</td>
      <td>0.162437</td>
      <td>0.750273</td>
    </tr>
    <tr>
      <th>Caldas</th>
      <td>-0.059184</td>
      <td>-0.067750</td>
      <td>-0.485429</td>
      <td>0.771161</td>
      <td>0.016557</td>
    </tr>
    <tr>
      <th>Caqueta</th>
      <td>-0.061174</td>
      <td>-0.468669</td>
      <td>-0.574400</td>
      <td>-1.012212</td>
      <td>-0.725149</td>
    </tr>
    <tr>
      <th>Cauca</th>
      <td>-0.795682</td>
      <td>-0.365312</td>
      <td>-0.414780</td>
      <td>-0.370390</td>
      <td>-0.439714</td>
    </tr>
    <tr>
      <th>Cesar</th>
      <td>0.339369</td>
      <td>-0.399596</td>
      <td>-0.094966</td>
      <td>-0.049362</td>
      <td>0.277503</td>
    </tr>
    <tr>
      <th>Cordoba</th>
      <td>-0.796998</td>
      <td>-0.860150</td>
      <td>-1.208040</td>
      <td>-0.573843</td>
      <td>-1.008305</td>
    </tr>
    <tr>
      <th>Cundinamarca</th>
      <td>0.308943</td>
      <td>0.803913</td>
      <td>-1.369223</td>
      <td>0.172663</td>
      <td>1.133231</td>
    </tr>
    <tr>
      <th>Choco</th>
      <td>-0.736138</td>
      <td>-0.914445</td>
      <td>-0.966477</td>
      <td>-1.096403</td>
      <td>-0.956544</td>
    </tr>
    <tr>
      <th>Huila</th>
      <td>-0.205885</td>
      <td>-0.186039</td>
      <td>0.520217</td>
      <td>0.182038</td>
      <td>0.751303</td>
    </tr>
    <tr>
      <th>La_Guajira</th>
      <td>-0.745839</td>
      <td>-0.610629</td>
      <td>-0.785435</td>
      <td>-1.113233</td>
      <td>-0.821455</td>
    </tr>
    <tr>
      <th>Magdalena</th>
      <td>-0.358869</td>
      <td>-0.702906</td>
      <td>0.025040</td>
      <td>-0.505449</td>
      <td>0.054491</td>
    </tr>
    <tr>
      <th>Meta</th>
      <td>1.751649</td>
      <td>0.304650</td>
      <td>1.547887</td>
      <td>0.470162</td>
      <td>1.159873</td>
    </tr>
    <tr>
      <th>narigno</th>
      <td>-1.717055</td>
      <td>-0.382144</td>
      <td>-0.662102</td>
      <td>0.302682</td>
      <td>-0.192256</td>
    </tr>
    <tr>
      <th>Norte_de_Santander</th>
      <td>-0.932852</td>
      <td>-0.295230</td>
      <td>0.201453</td>
      <td>-0.087833</td>
      <td>0.097127</td>
    </tr>
    <tr>
      <th>Quindio</th>
      <td>1.175131</td>
      <td>0.971076</td>
      <td>0.350610</td>
      <td>2.288576</td>
      <td>1.035139</td>
    </tr>
    <tr>
      <th>Risaralda</th>
      <td>0.495073</td>
      <td>0.070287</td>
      <td>0.053026</td>
      <td>2.471654</td>
      <td>0.071146</td>
    </tr>
    <tr>
      <th>Santander</th>
      <td>0.807637</td>
      <td>0.263066</td>
      <td>-1.408006</td>
      <td>1.320347</td>
      <td>1.057480</td>
    </tr>
    <tr>
      <th>Sucre</th>
      <td>0.014472</td>
      <td>-0.701094</td>
      <td>-0.189232</td>
      <td>-0.897342</td>
      <td>-0.245805</td>
    </tr>
    <tr>
      <th>Tolima</th>
      <td>-0.118026</td>
      <td>-0.308773</td>
      <td>0.130061</td>
      <td>1.838545</td>
      <td>0.605328</td>
    </tr>
    <tr>
      <th>Valle_del_Cauca</th>
      <td>-0.317508</td>
      <td>-0.148872</td>
      <td>-0.367528</td>
      <td>0.633006</td>
      <td>-0.195539</td>
    </tr>
    <tr>
      <th>Arauca</th>
      <td>1.825743</td>
      <td>1.218310</td>
      <td>2.063842</td>
      <td>-0.042178</td>
      <td>0.539031</td>
    </tr>
    <tr>
      <th>Casanare</th>
      <td>1.161088</td>
      <td>1.159370</td>
      <td>2.390391</td>
      <td>1.385430</td>
      <td>1.147144</td>
    </tr>
    <tr>
      <th>Putumayo</th>
      <td>0.546583</td>
      <td>-0.124204</td>
      <td>-0.293874</td>
      <td>-0.739700</td>
      <td>-0.229878</td>
    </tr>
    <tr>
      <th>San_Andres</th>
      <td>-0.811785</td>
      <td>-0.265788</td>
      <td>1.881736</td>
      <td>0.985519</td>
      <td>3.210255</td>
    </tr>
    <tr>
      <th>Amazonas</th>
      <td>1.874059</td>
      <td>-0.444096</td>
      <td>1.389494</td>
      <td>-0.905355</td>
      <td>0.748983</td>
    </tr>
    <tr>
      <th>Guainia</th>
      <td>1.945102</td>
      <td>4.417535</td>
      <td>-0.045536</td>
      <td>-0.306079</td>
      <td>-0.166173</td>
    </tr>
    <tr>
      <th>Guaviare</th>
      <td>0.169798</td>
      <td>-0.254935</td>
      <td>-0.300370</td>
      <td>-1.122402</td>
      <td>-0.790928</td>
    </tr>
    <tr>
      <th>Vaupes</th>
      <td>-2.260159</td>
      <td>-0.967877</td>
      <td>-1.578175</td>
      <td>-1.441936</td>
      <td>-1.748546</td>
    </tr>
    <tr>
      <th>Vichada</th>
      <td>-1.493367</td>
      <td>-0.789772</td>
      <td>-1.177127</td>
      <td>-0.529650</td>
      <td>-1.142594</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Realizamos la rutina habitual.</span>
<span class="n">pca2</span> <span class="o">=</span> <span class="n">PCA</span><span class="p">(</span><span class="n">n_components</span> <span class="o">=</span> <span class="mf">0.85</span><span class="p">)</span> 
<span class="n">pca2</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_scaled</span><span class="p">)</span>
<span class="n">n_comp</span><span class="p">,</span> <span class="n">var_exp</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">pca2</span><span class="o">.</span><span class="n">explained_variance_ratio_</span><span class="p">),</span> <span class="nb">sum</span><span class="p">(</span><span class="n">pca2</span><span class="o">.</span><span class="n">explained_variance_ratio_</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Con </span><span class="si">{}</span><span class="s2"> componentes se explica el </span><span class="si">{:.2f}% d</span><span class="s2">e la variabilidad&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">n_comp</span><span class="p">,</span><span class="n">var_exp</span><span class="o">*</span><span class="mi">100</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Con 3 componentes se explica el 87.92% de la variabilidad
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot de sedimentación</span>
<span class="n">sedimentacion</span><span class="p">(</span><span class="n">pca2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pca2_trans</span> <span class="o">=</span> <span class="n">pca2</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X_scaled</span><span class="p">)</span>
<span class="n">pca2_trans</span> <span class="o">=</span>  <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pca2_trans</span><span class="p">,</span> <span class="n">index</span> <span class="o">=</span> <span class="n">df2</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;PC1&quot;</span><span class="p">,</span><span class="s2">&quot;PC2&quot;</span><span class="p">,</span><span class="s2">&quot;PC3&quot;</span><span class="p">])</span>
<span class="n">pca2_trans</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PC1</th>
      <th>PC2</th>
      <th>PC3</th>
    </tr>
    <tr>
      <th>Departamento</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Antioquia</th>
      <td>-0.712187</td>
      <td>0.151438</td>
      <td>-0.039164</td>
    </tr>
    <tr>
      <th>Atlantico</th>
      <td>-1.168391</td>
      <td>-0.511234</td>
      <td>0.088261</td>
    </tr>
    <tr>
      <th>Bogota_D.C.</th>
      <td>0.086747</td>
      <td>-2.423493</td>
      <td>0.615291</td>
    </tr>
    <tr>
      <th>Bolivar</th>
      <td>-1.062042</td>
      <td>-0.059052</td>
      <td>0.315585</td>
    </tr>
    <tr>
      <th>Boyaca</th>
      <td>0.694155</td>
      <td>0.482570</td>
      <td>0.583906</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Se ajustó un PCA a una data de tamaño:&quot;</span><span class="p">,</span><span class="n">df2_pca</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Se obtuvo un ajuste por PCA de tamaño:&quot;</span><span class="p">,</span><span class="n">pca2_trans</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">expl</span> <span class="o">=</span> <span class="n">pca2</span><span class="o">.</span><span class="n">explained_variance_ratio_</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Cantidad de varianza explicada: </span><span class="si">{:.2f}</span><span class="s2">%&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">expl</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">])</span><span class="o">*</span><span class="mi">100</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Se ajustó un PCA a una data de tamaño: (33, 5)
Se obtuvo un ajuste por PCA de tamaño: (33, 3)
Cantidad de varianza explicada: 87.92%
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># La correlación lineal debe ser 0.</span>
<span class="n">pca2_trans</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PC1</th>
      <th>PC2</th>
      <th>PC3</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>PC1</th>
      <td>1.000000e+00</td>
      <td>-5.974580e-18</td>
      <td>-2.520275e-18</td>
    </tr>
    <tr>
      <th>PC2</th>
      <td>-5.974580e-18</td>
      <td>1.000000e+00</td>
      <td>1.426259e-15</td>
    </tr>
    <tr>
      <th>PC3</th>
      <td>-2.520275e-18</td>
      <td>1.426259e-15</td>
      <td>1.000000e+00</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## Plot loadings</span>
<span class="n">plot_loadings_heatmap</span><span class="p">(</span><span class="n">pca2</span><span class="p">,</span><span class="n">df2_pca</span><span class="p">,</span><span class="n">n_compo</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">view_index</span><span class="p">(</span><span class="n">df2_pca</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;Guainia&quot;</span><span class="p">,</span><span class="s2">&quot;Arauca&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>DSex_p</th>
      <th>DHom_p</th>
      <th>DIntra_p</th>
      <th>DTransi_p</th>
      <th>DAsal_p</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Guainia</th>
      <td>85.163191</td>
      <td>39.129034</td>
      <td>135.800764</td>
      <td>64.447820</td>
      <td>202.550292</td>
    </tr>
    <tr>
      <th>Arauca</th>
      <td>82.745985</td>
      <td>15.884274</td>
      <td>316.577271</td>
      <td>79.421369</td>
      <td>291.827356</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df2_pca</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>DSex_p        45.771800
DHom_p         7.032346
DIntra_p     139.703236
DTransi_p     81.814546
DAsal_p      223.587321
dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
    <span class="n">pca2_trans</span><span class="p">,</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">&quot;PC1&quot;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">&quot;PC2&quot;</span><span class="p">,</span>
    <span class="n">text</span><span class="o">=</span><span class="n">pca2_trans</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
    <span class="n">hover_name</span><span class="o">=</span><span class="n">pca2_trans</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Interpretación&quot;</span>
<span class="p">)</span>

<span class="n">fig</span><span class="o">.</span><span class="n">add_hline</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">line_color</span><span class="o">=</span><span class="s2">&quot;yellow&quot;</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">add_vline</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">line_color</span><span class="o">=</span><span class="s2">&quot;yellow&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">biplot</span><span class="p">(</span><span class="n">pca2</span><span class="p">,</span> <span class="n">df2_pca</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">biplot</span><span class="p">(</span><span class="n">pca2</span><span class="p">,</span><span class="n">df2_pca</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">biplot</span><span class="p">(</span><span class="n">pca2</span><span class="p">,</span> <span class="n">df2_pca</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
</section>
<section id="ejemplo-3">
<h2><em><strong>Ejemplo 3.</strong></em><a class="headerlink" href="#ejemplo-3" title="Link to this heading">#</a></h2>
<p>El siguiente dataframe contiene los cambios de indices bursatiles para las 517 empresas más importantes de los EEUU. Este dataframe es muy usado en series de tiempo pues muestra el comportamiento de las empresas a través de la historia.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_path3</span> <span class="o">=</span> <span class="s2">&quot;sp500_data.csv.gz&quot;</span>
<span class="n">sp500_px</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url_base</span><span class="o">+</span><span class="n">df_path3</span><span class="p">,</span> <span class="n">compression</span><span class="o">=</span><span class="s1">&#39;gzip&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">sp500_px</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ADS</th>
      <th>CA</th>
      <th>MSFT</th>
      <th>RHT</th>
      <th>CTSH</th>
      <th>CSC</th>
      <th>EMC</th>
      <th>IBM</th>
      <th>XRX</th>
      <th>ALTR</th>
      <th>...</th>
      <th>WAT</th>
      <th>ALXN</th>
      <th>AMGN</th>
      <th>BXLT</th>
      <th>BIIB</th>
      <th>CELG</th>
      <th>GILD</th>
      <th>REGN</th>
      <th>VRTX</th>
      <th>HSIC</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1993-01-29</th>
      <td>0.0</td>
      <td>0.060124</td>
      <td>-0.022100</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.018897</td>
      <td>0.007368</td>
      <td>0.092165</td>
      <td>0.259140</td>
      <td>-0.007105</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.34716</td>
      <td>0.0</td>
      <td>0.04167</td>
      <td>0.00000</td>
      <td>0.015564</td>
      <td>1.75</td>
      <td>0.1250</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>1993-02-01</th>
      <td>0.0</td>
      <td>-0.180389</td>
      <td>0.027621</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.018889</td>
      <td>0.018425</td>
      <td>0.115207</td>
      <td>-0.100775</td>
      <td>0.063893</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-0.23144</td>
      <td>0.0</td>
      <td>0.00000</td>
      <td>-0.01041</td>
      <td>0.007782</td>
      <td>1.25</td>
      <td>0.1250</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>1993-02-02</th>
      <td>0.0</td>
      <td>-0.120257</td>
      <td>0.035900</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-0.075573</td>
      <td>0.029482</td>
      <td>-0.023041</td>
      <td>0.028796</td>
      <td>-0.014192</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-0.11572</td>
      <td>0.0</td>
      <td>0.00000</td>
      <td>0.00000</td>
      <td>-0.007792</td>
      <td>-0.25</td>
      <td>0.0000</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>1993-02-03</th>
      <td>0.0</td>
      <td>0.060124</td>
      <td>-0.024857</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-0.151128</td>
      <td>0.003689</td>
      <td>-0.253454</td>
      <td>-0.043190</td>
      <td>-0.007105</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-0.08679</td>
      <td>0.0</td>
      <td>0.04167</td>
      <td>-0.04167</td>
      <td>-0.038919</td>
      <td>-0.50</td>
      <td>0.0625</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>1993-02-04</th>
      <td>0.0</td>
      <td>-0.360770</td>
      <td>-0.060757</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.113350</td>
      <td>-0.022114</td>
      <td>0.069862</td>
      <td>0.000000</td>
      <td>-0.007096</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.14465</td>
      <td>0.0</td>
      <td>-0.04166</td>
      <td>-0.03126</td>
      <td>-0.046711</td>
      <td>0.00</td>
      <td>0.0625</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 517 columns</p>
</div></div></div>
</div>
<p>Para muestro análisis vamos a considerar las siguientes empresas:
<br></br></p>
<center>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>Eitiqueta</p></th>
<th class="head text-center"><p>Nombre</p></th>
<th class="head text-center"><p>Sector</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>AAPL</p></td>
<td class="text-center"><p>Apple Inc.</p></td>
<td class="text-center"><p>Information Technology</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>MSFT</p></td>
<td class="text-center"><p>Microsoft Corp</p></td>
<td class="text-center"><p>Information Technology</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>CSCO</p></td>
<td class="text-center"><p>Cisco Systems</p></td>
<td class="text-center"><p>Information Technology</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>INTC</p></td>
<td class="text-center"><p>Intel Corp</p></td>
<td class="text-center"><p>Information Technology</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>CVX</p></td>
<td class="text-center"><p>Chevron Corp.</p></td>
<td class="text-center"><p>Energy</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>XOM</p></td>
<td class="text-center"><p>Exxon Mobil Corp</p></td>
<td class="text-center"><p>Energy</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>SLB</p></td>
<td class="text-center"><p>Schlumberger Ltd</p></td>
<td class="text-center"><p>Energy</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>COP</p></td>
<td class="text-center"><p>ConocoPhillips</p></td>
<td class="text-center"><p>Energy</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>JPM</p></td>
<td class="text-center"><p>JPMorgan Chase &amp; Co</p></td>
<td class="text-center"><p>Financials</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>WFC</p></td>
<td class="text-center"><p>Wells Fargo</p></td>
<td class="text-center"><p>Financials</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>USB</p></td>
<td class="text-center"><p>U.S. Bancorp</p></td>
<td class="text-center"><p>Financials</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>AXP</p></td>
<td class="text-center"><p>American Express Co</p></td>
<td class="text-center"><p>Financials</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>WMT</p></td>
<td class="text-center"><p>Wal-Mart Stores</p></td>
<td class="text-center"><p>Consumer Staples</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>TGT</p></td>
<td class="text-center"><p>Target Corp.</p></td>
<td class="text-center"><p>Consumer Discretionary</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>HD</p></td>
<td class="text-center"><p>Home Depot</p></td>
<td class="text-center"><p>Consumer Discretionary</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>COST</p></td>
<td class="text-center"><p>Costco Wholesale Corp.</p></td>
<td class="text-center"><p>Consumer Staples</p></td>
</tr>
</tbody>
</table>
</div>
 </center> 
<p>Además de considerar los datos desde el 01 de enero de 2011 y hasta el final de los registros, en este caso 01 de julio del año 2015.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">col_sel</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">([</span><span class="s2">&quot;AAPL&quot;</span><span class="p">,</span> <span class="s2">&quot;MSFT&quot;</span><span class="p">,</span> <span class="s2">&quot;CSCO&quot;</span><span class="p">,</span> <span class="s2">&quot;INTC&quot;</span><span class="p">,</span> <span class="s2">&quot;CVX&quot;</span><span class="p">,</span> <span class="s2">&quot;XOM&quot;</span><span class="p">,</span> <span class="s2">&quot;SLB&quot;</span><span class="p">,</span> <span class="s2">&quot;COP&quot;</span><span class="p">,</span> <span class="s2">&quot;JPM&quot;</span><span class="p">,</span> <span class="s2">&quot;WFC&quot;</span><span class="p">,</span> 
                  <span class="s2">&quot;USB&quot;</span><span class="p">,</span> <span class="s2">&quot;AXP&quot;</span><span class="p">,</span> <span class="s2">&quot;WMT&quot;</span><span class="p">,</span> <span class="s2">&quot;TGT&quot;</span><span class="p">,</span> <span class="s2">&quot;HD&quot;</span><span class="p">,</span> <span class="s2">&quot;COST&quot;</span><span class="p">])</span>
<span class="n">df_pca3</span> <span class="o">=</span> <span class="n">sp500_px</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">sp500_px</span><span class="o">.</span><span class="n">index</span> <span class="o">&gt;=</span> <span class="s2">&quot;2011-01-01&quot;</span><span class="p">,</span> <span class="n">col_sel</span><span class="p">]</span>
<span class="n">df_pca3</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>AAPL</th>
      <th>AXP</th>
      <th>COP</th>
      <th>COST</th>
      <th>CSCO</th>
      <th>CVX</th>
      <th>HD</th>
      <th>INTC</th>
      <th>JPM</th>
      <th>MSFT</th>
      <th>SLB</th>
      <th>TGT</th>
      <th>USB</th>
      <th>WFC</th>
      <th>WMT</th>
      <th>XOM</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2011-01-03</th>
      <td>0.527368</td>
      <td>0.093870</td>
      <td>-0.336272</td>
      <td>-0.240605</td>
      <td>0.035704</td>
      <td>0.240681</td>
      <td>0.099184</td>
      <td>-0.137211</td>
      <td>0.512093</td>
      <td>-0.061805</td>
      <td>-0.325923</td>
      <td>0.455646</td>
      <td>-0.234866</td>
      <td>0.250042</td>
      <td>0.294839</td>
      <td>0.736805</td>
    </tr>
    <tr>
      <th>2011-01-04</th>
      <td>-0.154321</td>
      <td>-0.431788</td>
      <td>-0.463161</td>
      <td>-0.171859</td>
      <td>0.008926</td>
      <td>-0.584516</td>
      <td>-0.541005</td>
      <td>0.025726</td>
      <td>0.335894</td>
      <td>0.132440</td>
      <td>-2.030049</td>
      <td>-0.580720</td>
      <td>-0.153566</td>
      <td>0.000000</td>
      <td>0.142951</td>
      <td>0.168668</td>
    </tr>
    <tr>
      <th>2011-01-05</th>
      <td>0.597152</td>
      <td>0.895406</td>
      <td>-0.057104</td>
      <td>-0.859307</td>
      <td>0.169599</td>
      <td>0.446985</td>
      <td>-0.054099</td>
      <td>-0.214392</td>
      <td>0.689468</td>
      <td>0.088294</td>
      <td>1.536499</td>
      <td>-0.482448</td>
      <td>0.198732</td>
      <td>0.857284</td>
      <td>-0.303772</td>
      <td>0.026631</td>
    </tr>
    <tr>
      <th>2011-01-06</th>
      <td>-0.132850</td>
      <td>-0.612646</td>
      <td>-0.463161</td>
      <td>0.249200</td>
      <td>0.035706</td>
      <td>-0.919751</td>
      <td>-0.189354</td>
      <td>0.085757</td>
      <td>0.070713</td>
      <td>0.688689</td>
      <td>-1.927614</td>
      <td>-0.786210</td>
      <td>-0.532962</td>
      <td>0.000000</td>
      <td>-0.312709</td>
      <td>0.248558</td>
    </tr>
    <tr>
      <th>2011-01-07</th>
      <td>0.285820</td>
      <td>-0.537242</td>
      <td>-0.006350</td>
      <td>-0.257788</td>
      <td>0.098187</td>
      <td>0.180511</td>
      <td>-0.036064</td>
      <td>-0.042878</td>
      <td>-0.795539</td>
      <td>-0.035317</td>
      <td>0.931215</td>
      <td>-0.089345</td>
      <td>-0.171633</td>
      <td>-0.651894</td>
      <td>0.169758</td>
      <td>0.337329</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Realizamos la rutina habitual.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">scaler3</span> <span class="o">=</span> <span class="n">StandardScaler</span><span class="p">()</span>
<span class="n">scaler3</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df_pca3</span><span class="p">)</span>
<span class="n">X_scaled3</span> <span class="o">=</span> <span class="n">scaler3</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">df_pca3</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">X_scaled3</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">df_pca3</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">df_pca3</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>AAPL</th>
      <th>AXP</th>
      <th>COP</th>
      <th>COST</th>
      <th>CSCO</th>
      <th>CVX</th>
      <th>HD</th>
      <th>INTC</th>
      <th>JPM</th>
      <th>MSFT</th>
      <th>SLB</th>
      <th>TGT</th>
      <th>USB</th>
      <th>WFC</th>
      <th>WMT</th>
      <th>XOM</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2011-01-03</th>
      <td>0.561707</td>
      <td>0.110812</td>
      <td>-0.509688</td>
      <td>-0.299786</td>
      <td>0.117204</td>
      <td>0.252913</td>
      <td>0.094034</td>
      <td>-0.555764</td>
      <td>0.920070</td>
      <td>-0.213019</td>
      <td>-0.267647</td>
      <td>0.794378</td>
      <td>-0.764788</td>
      <td>0.630204</td>
      <td>0.509947</td>
      <td>0.985516</td>
    </tr>
    <tr>
      <th>2011-01-04</th>
      <td>-0.107735</td>
      <td>-0.651798</td>
      <td>-0.710903</td>
      <td>-0.220968</td>
      <td>-0.008461</td>
      <td>-0.599033</td>
      <td>-0.824095</td>
      <td>0.021865</td>
      <td>0.596087</td>
      <td>0.317332</td>
      <td>-1.805599</td>
      <td>-1.045530</td>
      <td>-0.513618</td>
      <td>-0.026284</td>
      <td>0.212894</td>
      <td>0.193236</td>
    </tr>
    <tr>
      <th>2011-01-05</th>
      <td>0.630238</td>
      <td>1.273658</td>
      <td>-0.066998</td>
      <td>-1.009130</td>
      <td>0.745557</td>
      <td>0.465905</td>
      <td>-0.125796</td>
      <td>-0.829379</td>
      <td>1.246217</td>
      <td>0.196799</td>
      <td>1.413166</td>
      <td>-0.871062</td>
      <td>0.574786</td>
      <td>2.224522</td>
      <td>-0.660779</td>
      <td>-0.004839</td>
    </tr>
    <tr>
      <th>2011-01-06</th>
      <td>-0.086650</td>
      <td>-0.914182</td>
      <td>-0.710904</td>
      <td>0.261778</td>
      <td>0.117213</td>
      <td>-0.945136</td>
      <td>-0.319773</td>
      <td>0.234680</td>
      <td>0.108487</td>
      <td>1.836075</td>
      <td>-1.713152</td>
      <td>-1.410346</td>
      <td>-1.685740</td>
      <td>-0.026284</td>
      <td>-0.678256</td>
      <td>0.304644</td>
    </tr>
    <tr>
      <th>2011-01-07</th>
      <td>0.324498</td>
      <td>-0.804788</td>
      <td>0.013486</td>
      <td>-0.319486</td>
      <td>0.410429</td>
      <td>0.190793</td>
      <td>-0.099932</td>
      <td>-0.221342</td>
      <td>-1.484324</td>
      <td>-0.140698</td>
      <td>0.866905</td>
      <td>-0.173168</td>
      <td>-0.569436</td>
      <td>-1.737836</td>
      <td>0.265322</td>
      <td>0.428437</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2015-06-25</th>
      <td>-1.291754</td>
      <td>-1.629728</td>
      <td>-1.482904</td>
      <td>-1.170435</td>
      <td>-0.795464</td>
      <td>-1.141553</td>
      <td>-1.482363</td>
      <td>-0.175690</td>
      <td>-1.245487</td>
      <td>-1.081788</td>
      <td>-0.596224</td>
      <td>0.127481</td>
      <td>-0.776401</td>
      <td>-1.549084</td>
      <td>-1.220558</td>
      <td>-1.324935</td>
    </tr>
    <tr>
      <th>2015-06-26</th>
      <td>-0.859656</td>
      <td>-0.444529</td>
      <td>0.071124</td>
      <td>0.113645</td>
      <td>-1.028313</td>
      <td>0.376100</td>
      <td>-0.292015</td>
      <td>-1.806437</td>
      <td>-0.003276</td>
      <td>-1.109110</td>
      <td>0.279190</td>
      <td>-0.742435</td>
      <td>-0.100977</td>
      <td>0.236264</td>
      <td>0.246246</td>
      <td>-0.000142</td>
    </tr>
    <tr>
      <th>2015-06-29</th>
      <td>-0.869479</td>
      <td>-2.077787</td>
      <td>-0.626603</td>
      <td>-1.537309</td>
      <td>-2.145990</td>
      <td>-0.831825</td>
      <td>-1.511042</td>
      <td>-1.168325</td>
      <td>-0.898404</td>
      <td>-1.873597</td>
      <td>0.080650</td>
      <td>-2.482293</td>
      <td>-1.583905</td>
      <td>-1.969155</td>
      <td>-0.809870</td>
      <td>-0.362721</td>
    </tr>
    <tr>
      <th>2015-06-30</th>
      <td>-0.093671</td>
      <td>-0.678215</td>
      <td>-0.166733</td>
      <td>-1.537325</td>
      <td>-1.773440</td>
      <td>-1.007334</td>
      <td>-0.076901</td>
      <td>-0.813805</td>
      <td>-0.259013</td>
      <td>-1.573247</td>
      <td>-0.144973</td>
      <td>-1.825412</td>
      <td>-1.398532</td>
      <td>-0.813934</td>
      <td>-1.787726</td>
      <td>-0.795020</td>
    </tr>
    <tr>
      <th>2015-07-01</th>
      <td>-0.250801</td>
      <td>-0.373553</td>
      <td>-2.323355</td>
      <td>0.778636</td>
      <td>-0.378852</td>
      <td>-0.212384</td>
      <td>-0.593184</td>
      <td>-1.168318</td>
      <td>-0.113478</td>
      <td>-0.071570</td>
      <td>-1.886774</td>
      <td>1.565507</td>
      <td>0.671398</td>
      <td>-0.498876</td>
      <td>0.480924</td>
      <td>-1.310987</td>
    </tr>
  </tbody>
</table>
<p>1131 rows × 16 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## Realizamos la rutina habitual.</span>
<span class="n">pca3</span> <span class="o">=</span> <span class="n">PCA</span><span class="p">()</span> 
<span class="n">pca3</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_scaled3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style>#sk-container-id-3 {
  /* Definition of color scheme common for light and dark mode */
  --sklearn-color-text: black;
  --sklearn-color-line: gray;
  /* Definition of color scheme for unfitted estimators */
  --sklearn-color-unfitted-level-0: #fff5e6;
  --sklearn-color-unfitted-level-1: #f6e4d2;
  --sklearn-color-unfitted-level-2: #ffe0b3;
  --sklearn-color-unfitted-level-3: chocolate;
  /* Definition of color scheme for fitted estimators */
  --sklearn-color-fitted-level-0: #f0f8ff;
  --sklearn-color-fitted-level-1: #d4ebff;
  --sklearn-color-fitted-level-2: #b3dbfd;
  --sklearn-color-fitted-level-3: cornflowerblue;

  /* Specific color for light theme */
  --sklearn-color-text-on-default-background: var(--sg-text-color, var(--theme-code-foreground, var(--jp-content-font-color1, black)));
  --sklearn-color-background: var(--sg-background-color, var(--theme-background, var(--jp-layout-color0, white)));
  --sklearn-color-border-box: var(--sg-text-color, var(--theme-code-foreground, var(--jp-content-font-color1, black)));
  --sklearn-color-icon: #696969;

  @media (prefers-color-scheme: dark) {
    /* Redefinition of color scheme for dark theme */
    --sklearn-color-text-on-default-background: var(--sg-text-color, var(--theme-code-foreground, var(--jp-content-font-color1, white)));
    --sklearn-color-background: var(--sg-background-color, var(--theme-background, var(--jp-layout-color0, #111)));
    --sklearn-color-border-box: var(--sg-text-color, var(--theme-code-foreground, var(--jp-content-font-color1, white)));
    --sklearn-color-icon: #878787;
  }
}

#sk-container-id-3 {
  color: var(--sklearn-color-text);
}

#sk-container-id-3 pre {
  padding: 0;
}

#sk-container-id-3 input.sk-hidden--visually {
  border: 0;
  clip: rect(1px 1px 1px 1px);
  clip: rect(1px, 1px, 1px, 1px);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;
}

#sk-container-id-3 div.sk-dashed-wrapped {
  border: 1px dashed var(--sklearn-color-line);
  margin: 0 0.4em 0.5em 0.4em;
  box-sizing: border-box;
  padding-bottom: 0.4em;
  background-color: var(--sklearn-color-background);
}

#sk-container-id-3 div.sk-container {
  /* jupyter's `normalize.less` sets `[hidden] { display: none; }`
     but bootstrap.min.css set `[hidden] { display: none !important; }`
     so we also need the `!important` here to be able to override the
     default hidden behavior on the sphinx rendered scikit-learn.org.
     See: https://github.com/scikit-learn/scikit-learn/issues/21755 */
  display: inline-block !important;
  position: relative;
}

#sk-container-id-3 div.sk-text-repr-fallback {
  display: none;
}

div.sk-parallel-item,
div.sk-serial,
div.sk-item {
  /* draw centered vertical line to link estimators */
  background-image: linear-gradient(var(--sklearn-color-text-on-default-background), var(--sklearn-color-text-on-default-background));
  background-size: 2px 100%;
  background-repeat: no-repeat;
  background-position: center center;
}

/* Parallel-specific style estimator block */

#sk-container-id-3 div.sk-parallel-item::after {
  content: "";
  width: 100%;
  border-bottom: 2px solid var(--sklearn-color-text-on-default-background);
  flex-grow: 1;
}

#sk-container-id-3 div.sk-parallel {
  display: flex;
  align-items: stretch;
  justify-content: center;
  background-color: var(--sklearn-color-background);
  position: relative;
}

#sk-container-id-3 div.sk-parallel-item {
  display: flex;
  flex-direction: column;
}

#sk-container-id-3 div.sk-parallel-item:first-child::after {
  align-self: flex-end;
  width: 50%;
}

#sk-container-id-3 div.sk-parallel-item:last-child::after {
  align-self: flex-start;
  width: 50%;
}

#sk-container-id-3 div.sk-parallel-item:only-child::after {
  width: 0;
}

/* Serial-specific style estimator block */

#sk-container-id-3 div.sk-serial {
  display: flex;
  flex-direction: column;
  align-items: center;
  background-color: var(--sklearn-color-background);
  padding-right: 1em;
  padding-left: 1em;
}


/* Toggleable style: style used for estimator/Pipeline/ColumnTransformer box that is
clickable and can be expanded/collapsed.
- Pipeline and ColumnTransformer use this feature and define the default style
- Estimators will overwrite some part of the style using the `sk-estimator` class
*/

/* Pipeline and ColumnTransformer style (default) */

#sk-container-id-3 div.sk-toggleable {
  /* Default theme specific background. It is overwritten whether we have a
  specific estimator or a Pipeline/ColumnTransformer */
  background-color: var(--sklearn-color-background);
}

/* Toggleable label */
#sk-container-id-3 label.sk-toggleable__label {
  cursor: pointer;
  display: block;
  width: 100%;
  margin-bottom: 0;
  padding: 0.5em;
  box-sizing: border-box;
  text-align: center;
}

#sk-container-id-3 label.sk-toggleable__label-arrow:before {
  /* Arrow on the left of the label */
  content: "▸";
  float: left;
  margin-right: 0.25em;
  color: var(--sklearn-color-icon);
}

#sk-container-id-3 label.sk-toggleable__label-arrow:hover:before {
  color: var(--sklearn-color-text);
}

/* Toggleable content - dropdown */

#sk-container-id-3 div.sk-toggleable__content {
  max-height: 0;
  max-width: 0;
  overflow: hidden;
  text-align: left;
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-0);
}

#sk-container-id-3 div.sk-toggleable__content.fitted {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-0);
}

#sk-container-id-3 div.sk-toggleable__content pre {
  margin: 0.2em;
  border-radius: 0.25em;
  color: var(--sklearn-color-text);
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-0);
}

#sk-container-id-3 div.sk-toggleable__content.fitted pre {
  /* unfitted */
  background-color: var(--sklearn-color-fitted-level-0);
}

#sk-container-id-3 input.sk-toggleable__control:checked~div.sk-toggleable__content {
  /* Expand drop-down */
  max-height: 200px;
  max-width: 100%;
  overflow: auto;
}

#sk-container-id-3 input.sk-toggleable__control:checked~label.sk-toggleable__label-arrow:before {
  content: "▾";
}

/* Pipeline/ColumnTransformer-specific style */

#sk-container-id-3 div.sk-label input.sk-toggleable__control:checked~label.sk-toggleable__label {
  color: var(--sklearn-color-text);
  background-color: var(--sklearn-color-unfitted-level-2);
}

#sk-container-id-3 div.sk-label.fitted input.sk-toggleable__control:checked~label.sk-toggleable__label {
  background-color: var(--sklearn-color-fitted-level-2);
}

/* Estimator-specific style */

/* Colorize estimator box */
#sk-container-id-3 div.sk-estimator input.sk-toggleable__control:checked~label.sk-toggleable__label {
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-2);
}

#sk-container-id-3 div.sk-estimator.fitted input.sk-toggleable__control:checked~label.sk-toggleable__label {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-2);
}

#sk-container-id-3 div.sk-label label.sk-toggleable__label,
#sk-container-id-3 div.sk-label label {
  /* The background is the default theme color */
  color: var(--sklearn-color-text-on-default-background);
}

/* On hover, darken the color of the background */
#sk-container-id-3 div.sk-label:hover label.sk-toggleable__label {
  color: var(--sklearn-color-text);
  background-color: var(--sklearn-color-unfitted-level-2);
}

/* Label box, darken color on hover, fitted */
#sk-container-id-3 div.sk-label.fitted:hover label.sk-toggleable__label.fitted {
  color: var(--sklearn-color-text);
  background-color: var(--sklearn-color-fitted-level-2);
}

/* Estimator label */

#sk-container-id-3 div.sk-label label {
  font-family: monospace;
  font-weight: bold;
  display: inline-block;
  line-height: 1.2em;
}

#sk-container-id-3 div.sk-label-container {
  text-align: center;
}

/* Estimator-specific */
#sk-container-id-3 div.sk-estimator {
  font-family: monospace;
  border: 1px dotted var(--sklearn-color-border-box);
  border-radius: 0.25em;
  box-sizing: border-box;
  margin-bottom: 0.5em;
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-0);
}

#sk-container-id-3 div.sk-estimator.fitted {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-0);
}

/* on hover */
#sk-container-id-3 div.sk-estimator:hover {
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-2);
}

#sk-container-id-3 div.sk-estimator.fitted:hover {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-2);
}

/* Specification for estimator info (e.g. "i" and "?") */

/* Common style for "i" and "?" */

.sk-estimator-doc-link,
a:link.sk-estimator-doc-link,
a:visited.sk-estimator-doc-link {
  float: right;
  font-size: smaller;
  line-height: 1em;
  font-family: monospace;
  background-color: var(--sklearn-color-background);
  border-radius: 1em;
  height: 1em;
  width: 1em;
  text-decoration: none !important;
  margin-left: 1ex;
  /* unfitted */
  border: var(--sklearn-color-unfitted-level-1) 1pt solid;
  color: var(--sklearn-color-unfitted-level-1);
}

.sk-estimator-doc-link.fitted,
a:link.sk-estimator-doc-link.fitted,
a:visited.sk-estimator-doc-link.fitted {
  /* fitted */
  border: var(--sklearn-color-fitted-level-1) 1pt solid;
  color: var(--sklearn-color-fitted-level-1);
}

/* On hover */
div.sk-estimator:hover .sk-estimator-doc-link:hover,
.sk-estimator-doc-link:hover,
div.sk-label-container:hover .sk-estimator-doc-link:hover,
.sk-estimator-doc-link:hover {
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-3);
  color: var(--sklearn-color-background);
  text-decoration: none;
}

div.sk-estimator.fitted:hover .sk-estimator-doc-link.fitted:hover,
.sk-estimator-doc-link.fitted:hover,
div.sk-label-container:hover .sk-estimator-doc-link.fitted:hover,
.sk-estimator-doc-link.fitted:hover {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-3);
  color: var(--sklearn-color-background);
  text-decoration: none;
}

/* Span, style for the box shown on hovering the info icon */
.sk-estimator-doc-link span {
  display: none;
  z-index: 9999;
  position: relative;
  font-weight: normal;
  right: .2ex;
  padding: .5ex;
  margin: .5ex;
  width: min-content;
  min-width: 20ex;
  max-width: 50ex;
  color: var(--sklearn-color-text);
  box-shadow: 2pt 2pt 4pt #999;
  /* unfitted */
  background: var(--sklearn-color-unfitted-level-0);
  border: .5pt solid var(--sklearn-color-unfitted-level-3);
}

.sk-estimator-doc-link.fitted span {
  /* fitted */
  background: var(--sklearn-color-fitted-level-0);
  border: var(--sklearn-color-fitted-level-3);
}

.sk-estimator-doc-link:hover span {
  display: block;
}

/* "?"-specific style due to the `<a>` HTML tag */

#sk-container-id-3 a.estimator_doc_link {
  float: right;
  font-size: 1rem;
  line-height: 1em;
  font-family: monospace;
  background-color: var(--sklearn-color-background);
  border-radius: 1rem;
  height: 1rem;
  width: 1rem;
  text-decoration: none;
  /* unfitted */
  color: var(--sklearn-color-unfitted-level-1);
  border: var(--sklearn-color-unfitted-level-1) 1pt solid;
}

#sk-container-id-3 a.estimator_doc_link.fitted {
  /* fitted */
  border: var(--sklearn-color-fitted-level-1) 1pt solid;
  color: var(--sklearn-color-fitted-level-1);
}

/* On hover */
#sk-container-id-3 a.estimator_doc_link:hover {
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-3);
  color: var(--sklearn-color-background);
  text-decoration: none;
}

#sk-container-id-3 a.estimator_doc_link.fitted:hover {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-3);
}
</style><div id="sk-container-id-3" class="sk-top-container"><div class="sk-text-repr-fallback"><pre>PCA()</pre><b>In a Jupyter environment, please rerun this cell to show the HTML representation or trust the notebook. <br />On GitHub, the HTML representation is unable to render, please try loading this page with nbviewer.org.</b></div><div class="sk-container" hidden><div class="sk-item"><div class="sk-estimator fitted sk-toggleable"><input class="sk-toggleable__control sk-hidden--visually" id="sk-estimator-id-3" type="checkbox" checked><label for="sk-estimator-id-3" class="sk-toggleable__label fitted sk-toggleable__label-arrow fitted">&nbsp;&nbsp;PCA<a class="sk-estimator-doc-link fitted" rel="noreferrer" target="_blank" href="https://scikit-learn.org/1.5/modules/generated/sklearn.decomposition.PCA.html">?<span>Documentation for PCA</span></a><span class="sk-estimator-doc-link fitted">i<span>Fitted</span></span></label><div class="sk-toggleable__content fitted"><pre>PCA()</pre></div> </div></div></div></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## Plot de sedimentación.</span>
<span class="n">sedimentacion</span><span class="p">(</span><span class="n">pca3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<p>Como se ve en el plot anterior, la varianza del primer componente principal es bastante grande (como
suele ser el caso), pero los otros componentes principales también son significativos.</p>
<p>¿Cuántas compomentes principales de deben seleccionar?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## Plot loadings</span>
<span class="n">plot_loadings_heatmap</span><span class="p">(</span><span class="n">pca3</span><span class="p">,</span> <span class="n">df_pca3</span><span class="p">,</span> <span class="n">n_compo</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<p>En el heatmap anterior se muestran las cargas para las primeras 5 compomentes principales del objeto <code class="docutils literal notranslate"><span class="pre">pca3</span></code>.</p>
<ul class="simple">
<li><p>Los loadings del primer componente principal tienen el mismo signo, esto sucede típicamente cuando las features comparten un factor común (aquí, la tendencia general del mercado de valores).</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plot_loadings_bar</span><span class="p">(</span><span class="n">pca3</span><span class="p">,</span> <span class="n">df_pca3</span><span class="p">,</span> <span class="n">n_compo</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<ul class="simple">
<li><p>Al parecer el segundo componente captura los cambios de precio en aquellas acciones del sector de energía en comparación con las otras acciones.</p></li>
<li><p>El tercer componente es principalmente un contraste en los movimientos de Apple y Cost.</p></li>
<li><p>El cuarto componente contrasta los movimientos de Schlumberger (SLB) al resto de acciones energéticas.</p></li>
<li><p>El quinto componente está mayoritariamente dominado por empresas financieras.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">biplot</span><span class="p">(</span><span class="n">pca3</span><span class="p">,</span> <span class="n">df_pca3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">biplot1</span><span class="p">(</span><span class="n">pca3</span><span class="p">,</span><span class="n">df_pca3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
</section>
<section id="conclusiones">
<h2><em><strong>Conclusiones.</strong></em><a class="headerlink" href="#conclusiones" title="Link to this heading">#</a></h2>
<ol class="arabic simple">
<li><p>PCA es una técnica lineal que busca reducir la dimensionalidad del dataset buscando optimizar la perdida de información presente en la variabilidad.</p></li>
<li><p>Una desventaja de PCA es que los dos ejes del primer plano factorial a menudo no son muy fáciles de interpretar. Esto debido a que las componentes principales corresponden a direcciones en los datos originales, dado que son combinaciones de las features originales.</p></li>
<li><p>Existen técnicas más modernas para realizar la reducción de dimensionalidad en el dataset, algunas las desarrollaremos más adelante en el curso.</p></li>
</ol>
</section>
<section id="tarea-2">
<h2><em><strong>Tarea 2</strong></em><a class="headerlink" href="#tarea-2" title="Link to this heading">#</a></h2>
<p>Realizar un análisis de compomentes principales de la tabla de los resultados de las pruebas <a class="reference external" href="https://www.datos.gov.co/Educaci-n/PUNTAJE-ICFES-POR-DEPARTAMENTOS/x9vi-iv8c">ICFES 2019-2</a>.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./chapters"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="Lectura_3_ACP.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><em><strong>Analisis de compomente principales (PCA).</strong></em></p>
      </div>
    </a>
    <a class="right-next"
       href="Lectura_5_AC.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><em><strong>Análisis de correspondencias simples.</strong></em></p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#universidad-central"><em><strong>Universidad Central</strong></em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#maestria-en-analitica-de-datos"><em><strong>Maestría en analítica de datos</strong></em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#metodos-estadisticos-para-analitica-de-datos"><em><strong>Métodos estadísticos para analítica de datos.</strong></em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#docente-luis-andres-campos-maldonado"><em><strong>Docente: Luis Andrés Campos Maldonado.</strong></em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#idea-central"><em><strong>Idea central:</strong></em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#terminos-clave-para-el-analisis-de-componentes-principales"><em><strong>Términos clave para el análisis de componentes principales.</strong></em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#representacion-de-variables-originales-en-un-biplot-de-pca"><em><strong>Representación de Variables Originales en un Biplot de PCA</strong></em></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#matriz-de-datos-originales"><em><strong>Matriz de Datos Originales</strong></em></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#descomposicion-en-componentes-principales"><em><strong>Descomposición en Componentes Principales</strong></em></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#calculo-de-la-matriz-de-covarianza"><em><strong>Cálculo de la Matriz de Covarianza</strong></em></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#eigenvalores-y-eigenvectores"><em><strong>Eigenvalores y Eigenvectores</strong></em></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#proyeccion-de-los-datos"><em><strong>Proyección de los Datos</strong></em></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#representacion-de-las-variables-originales-en-el-biplot"><em><strong>Representación de las Variables Originales en el Biplot</strong></em></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#matriz-de-cargas"><em><strong>Matriz de Cargas</strong></em></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#proyeccion-de-variables-en-el-espacio-de-las-componentes-principales"><em><strong>Proyección de Variables en el Espacio de las Componentes Principales</strong></em></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#visualizacion-en-el-biplot"><em><strong>Visualización en el Biplot</strong></em></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#interpretacion"><em><strong>Interpretación</strong></em></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#resumen"><em><strong>Resumen</strong></em></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#protocolo-de-modulos-pca"><em><strong>Protocolo de módulos PCA.</strong></em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#construccion-de-algunas-funciones-auxiliares"><em><strong>Construcción de algunas funciones auxiliares</strong></em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplo-1"><em><strong>Ejemplo 1</strong></em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ejercicio-en-clase"><em><strong>Ejercicio en clase.</strong></em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#retomando-un-ejemplo-anterior"><em><strong>Retomando un ejemplo anterior.</strong></em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplo-2"><em><strong>Ejemplo 2.</strong></em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplo-3"><em><strong>Ejemplo 3.</strong></em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusiones"><em><strong>Conclusiones.</strong></em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tarea-2"><em><strong>Tarea 2</strong></em></a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Luis Andres Campos
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>